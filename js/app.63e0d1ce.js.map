{"version":3,"file":"js/app.63e0d1ce.js","mappings":"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","sources":["webpack://html_v2/./src/App.vue","webpack://html_v2/./src/js/emoji.js","webpack://html_v2/./src/js/webrtc.js","webpack://html_v2/./src/js/constant.js","webpack://html_v2/./src/js/imessage.js","webpack://html_v2/./src/js/util.js","webpack://html_v2/./src/js/iprocessor.js","webpack://html_v2/./src/js/general.js","webpack://html_v2/./src/js/group.js","webpack://html_v2/./src/js/voice_visualize.js","webpack://html_v2/./src/js/rtc.js","webpack://html_v2/./src/js/unknown.js","webpack://html_v2/src/App.vue","webpack://html_v2/./src/components/lemon-message-music.vue","webpack://html_v2/./src/App.vue?c036","webpack://html_v2/./src/App.vue?0e40","webpack://html_v2/src/components/lemon-message-music.vue","webpack://html_v2/./src/components/lemon-message-music.vue?b49a","webpack://html_v2/./src/main.js","webpack://html_v2/webpack/bootstrap","webpack://html_v2/webpack/runtime/chunk loaded","webpack://html_v2/webpack/runtime/compat get default export","webpack://html_v2/webpack/runtime/define property getters","webpack://html_v2/webpack/runtime/global","webpack://html_v2/webpack/runtime/harmony module decorator","webpack://html_v2/webpack/runtime/hasOwnProperty shorthand","webpack://html_v2/webpack/runtime/make namespace object","webpack://html_v2/webpack/runtime/jsonp chunk loading","webpack://html_v2/webpack/startup"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('main',[_c('lemon-imui',{ref:\"im\",attrs:{\"user\":_vm.user,\"hide-message-name\":false,\"avatarCricle\":true,\"width\":_vm.width,\"height\":_vm.height},on:{\"pull-messages\":_vm.getHistory,\"message-click\":_vm.messageClick,\"change-contact\":_vm.changeContact,\"menu-avatar-click\":_vm.changeAvatar,\"send\":_vm.send},scopedSlots:_vm._u([{key:\"sidebar-message-fixedtop\",fn:function(){return [_c('div',{staticClass:\"flex space-between search-bar\"},[_c('input',{staticClass:\"input-medium\",attrs:{\"type\":\"text\",\"placeholder\":\"搜索\"}}),_c('button',{on:{\"click\":_vm.addGroup}},[_vm._v(\"➕\")])])]},proxy:true},{key:\"sidebar-message\",fn:function(contact){return [_c('lemon-badge',{staticClass:\"lemon-contact__avatar\",attrs:{\"count\":contact.unread}},[_c('lemon-avatar',{attrs:{\"size\":40,\"src\":contact.avatar}})],1),_c('div',{staticClass:\"lemon-contact__inner\"},[_c('p',{staticClass:\"lemon-contact__label\"},[(contact.is_online)?_c('span',{staticClass:\"online-status\"}):_vm._e(),_c('span',{staticClass:\"lemon-contact__name\"},[_vm._v(_vm._s(contact.displayName))]),_c('span',{staticClass:\"lemon-contact__time\"},[_vm._v(_vm._s(contact.lastSendTime ? _vm.timeFormat(contact.lastSendTime) : \"\")+\" \")])]),_c('p',{staticClass:\"lemon-contact__content\"},[_c('span',{domProps:{\"innerHTML\":_vm._s(contact.lastContent)}})])])]}},{key:\"message-title\",fn:function(contact){return [_c('div',{staticClass:\"flex space-between\"},[_c('span',[_vm._v(_vm._s(contact.displayName)),(contact.is_group)?_c('span',[_vm._v(\" (\"+_vm._s(contact.id ? contact.members.size : contact.online_total)+\")\")]):_vm._e()]),_c('b',{staticClass:\"pointer user-select-none\",on:{\"click\":function($event){return _vm.toggleDrawer(contact)}}},[_vm._v(\"···\")])])]}},{key:\"drawer\",fn:function(contact){return [(contact.is_group)?_c('div',{staticClass:\"slot-group\"},[_c('div',{staticClass:\"slot-group-title\"},[_vm._v(\"群通知\")]),_c('hr'),_c('div',{staticClass:\"slot-group-notice\"},[_vm._v(\"公告内容\")]),_c('hr'),_c('div',{staticClass:\"slot-group-title\"},[_vm._v(\"群成员\")]),_c('input',{staticClass:\"slot-search\",attrs:{\"placeholder\":\"搜索群成员\"}}),_c('div',{staticClass:\"slot-group-panel flex flex-top\"},_vm._l((contact.members.values()),function(item){return _c('lemon-contact',{directives:[{name:\"lemon-contextmenu\",rawName:\"v-lemon-contextmenu.contact\",value:(_vm.group_menu),expression:\"group_menu\",modifiers:{\"contact\":true}}],key:item.user_id,attrs:{\"contact\":item}},[_c('div',{staticClass:\"slot-group-member\"},[_c('div',{staticClass:\"slot-group-avatar\"},[_c('img',{attrs:{\"src\":item.avatar ? _vm.upload_url + item.avatar : _vm.default_avatar_url,\"alt\":\"avatar\"}})]),_c('div',{staticClass:\"slot-group-name text-ellipsis\"},[_vm._v(_vm._s(item.username))])])])}),1)]):_vm._e()]}}])}),_c('modal',{attrs:{\"name\":\"login-modal\",\"clickToClose\":false,\"height\":250,\"width\":250,\"adaptive\":true}},[_c('dialog',{staticClass:\"box\",attrs:{\"open\":\"\"}},[_c('div',{staticClass:\"partition-title\"},[_vm._v(\"请登录/注册\")]),_c('div',{staticClass:\"partition-form\"},[_c('form',{attrs:{\"autocomplete\":\"off\"}},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.username),expression:\"username\"}],attrs:{\"type\":\"text\",\"id\":\"username\",\"placeholder\":\"起个名吧，亲:)\",\"maxlength\":\"30\",\"autocomplete\":\"\"},domProps:{\"value\":(_vm.username)},on:{\"input\":function($event){if($event.target.composing)return;_vm.username=$event.target.value}}}),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.password),expression:\"password\"}],attrs:{\"type\":\"password\",\"id\":\"password\",\"placeholder\":\"密码：默认123456\",\"maxlength\":\"16\"},domProps:{\"value\":(_vm.password)},on:{\"input\":function($event){if($event.target.composing)return;_vm.password=$event.target.value}}}),_c('button',{staticClass:\"large-btn gold-btn\",attrs:{\"type\":\"submit\"},on:{\"click\":_vm.login}},[_vm._v(\" 登录/注册 \")])])])])]),_c('modal',{attrs:{\"name\":\"disconnect-modal\",\"clickToClose\":false,\"height\":25,\"width\":300}},[_vm._v(_vm._s(_vm.disconnect_mess))]),_c('notifications',{attrs:{\"group\":\"tip\",\"position\":\"top center\"}}),_c('viewer',{attrs:{\"images\":_vm.images}}),[_c('image-crop',{attrs:{\"field\":\"img\",\"width\":300,\"height\":300,\"img-format\":\"png\"},on:{\"crop-success\":_vm.cropSuccess},model:{value:(_vm.image_crop.show),callback:function ($$v) {_vm.$set(_vm.image_crop, \"show\", $$v)},expression:\"image_crop.show\"}})],_c('modal',{attrs:{\"name\":\"group-modal\",\"clickToClose\":true,\"height\":500,\"width\":666,\"adaptive\":true}},[_c('div',{staticClass:\"modal-content\"},[_c('div',{staticClass:\"modal-header\"},[_c('h3',{staticClass:\"modal-title\"},[_vm._v(\"创建群聊\")]),_c('span',[_vm._v(\"群聊名称：\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.group_name),expression:\"group_name\"}],staticClass:\"input-medium group-name\",attrs:{\"placeholder\":\"请输入群聊名称\"},domProps:{\"value\":(_vm.group_name)},on:{\"input\":function($event){if($event.target.composing)return;_vm.group_name=$event.target.value}}})]),_c('div',{staticClass:\"flex space-between vertical-center modal-body\"},[_c('div',{staticClass:\"group-select\"},[_c('div',[_vm._v(\"联系人\")]),_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.left_options),expression:\"left_options\"}],attrs:{\"multiple\":\"\",\"size\":\"10\"},on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.left_options=$event.target.multiple ? $$selectedVal : $$selectedVal[0]}}},_vm._l((_vm.group_available_users.values()),function(item){return _c('option',{key:item.user_id,domProps:{\"value\":item.user_id}},[_vm._v(_vm._s(item.username))])}),0)]),_c('div',{staticClass:\"group-select-middle\"},[_c('button',{on:{\"click\":_vm.moveToLeft}},[_vm._v(\"⬅️\")]),_c('button',{on:{\"click\":_vm.moveToRight}},[_vm._v(\"➡️\")])]),_c('div',{staticClass:\"group-select\"},[_c('div',[_vm._v(\"已选\")]),_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.right_options),expression:\"right_options\"}],attrs:{\"multiple\":\"\",\"size\":\"10\"},on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.right_options=$event.target.multiple ? $$selectedVal : $$selectedVal[0]}}},_vm._l((_vm.group_chosen_users.values()),function(item){return _c('option',{key:item.user_id,domProps:{\"value\":item.user_id}},[_vm._v(_vm._s(item.username))])}),0)])]),_c('div',{staticClass:\"flex horizontal-right modal-footer\"},[_c('button',{on:{\"click\":_vm.groupCancel}},[_vm._v(\"取消\")]),_c('button',{on:{\"click\":_vm.groupSubmit}},[_vm._v(\"确定\")])])])]),_c('modal',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.rtc_minimize),expression:\"!rtc_minimize\"}],attrs:{\"name\":\"rtc-modal\",\"clickToClose\":false,\"height\":'auto',\"width\":960,\"scrollable\":true,\"draggable\":\"true\"}},[_c('div',{staticClass:\"flex flex-wrap horizontal-center vertical-center\"},[(_vm.video_flag)?[_c('div',{staticClass:\"local-video\"},[_c('video',{attrs:{\"autoplay\":\"\",\"muted\":\"\"},domProps:{\"muted\":true,\"srcObject\":_vm.local_media}}),_c('div',{staticClass:\"flex video-bar\"},[_c('div',{staticClass:\"video-tag text-ellipsis\"},[_vm._v(_vm._s(_vm.user.displayName))]),_c('canvas',{staticClass:\"voice-visualize-canvas\",attrs:{\"id\":\"local-canvas\",\"width\":\"420\",\"height\":\"30\"}})])]),_vm._l((_vm.remote_medias),function([index, remote_video]){return _c('div',{key:index,staticClass:\"remote-video\"},[_c('video',{attrs:{\"autoplay\":\"\"},domProps:{\"srcObject\":remote_video}}),_c('div',{staticClass:\"flex video-bar\"},[_c('div',{staticClass:\"video-tag text-ellipsis\"},[_vm._v(_vm._s(_vm.remote_users.get(index).username))]),_c('canvas',{staticClass:\"voice-visualize-canvas\",attrs:{\"id\":'remote-canvas-' + index,\"width\":\"420\",\"height\":\"30\"}})])])})]:[_c('div',{staticClass:\"local-audio\"},[_c('audio',{attrs:{\"autoplay\":\"\",\"muted\":\"\"},domProps:{\"srcObject\":_vm.local_media},on:{\"canplay\":_vm.setMute}}),_c('div',{staticClass:\"flex audio-bar\"},[_c('div',[_c('img',{attrs:{\"src\":_vm.user.avatar}}),_c('div',{staticClass:\"text-ellipsis text-center username\"},[_vm._v(_vm._s(_vm.user.displayName))])]),_c('canvas',{staticClass:\"voice-visualize-canvas\",attrs:{\"id\":\"local-canvas\",\"width\":\"380\",\"height\":\"120\"}})])]),_vm._l((_vm.remote_medias),function([index, remote_audio]){return _c('div',{key:index,staticClass:\"remote-audio\"},[_c('audio',{attrs:{\"autoplay\":\"\"},domProps:{\"srcObject\":remote_audio}}),_c('div',{staticClass:\"flex audio-bar\"},[_c('div',[_c('img',{attrs:{\"src\":_vm.remote_users.get(index).avatar ? _vm.upload_url + _vm.remote_users.get(index).avatar : _vm.default_avatar_url}}),_c('div',{staticClass:\"text-ellipsis text-center username\"},[_vm._v(_vm._s(_vm.remote_users.get(index).username))])]),_c('canvas',{staticClass:\"voice-visualize-canvas\",attrs:{\"id\":'remote-canvas-' + index,\"width\":\"380\",\"height\":\"120\"}})])])})]],2),_c('div',{staticClass:\"flex space-between vertical-center\"},[_c('div',[_c('button',{staticClass:\"minimize-button\",on:{\"click\":_vm.minimize}},[_vm._v(\"➖最小化\")])]),_c('div',{staticClass:\"flex vertical-center\"},[_c('span',[_vm._v(_vm._s(_vm.clock_text))]),_c('button',{staticClass:\"flex vertical-center\",on:{\"click\":_vm.hangUp}},[_c('span',{staticClass:\"hang-up-button\"}),_c('span',[_vm._v(\"结束通话\")])])])])]),_c('v-dialog'),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.rtc_minimize),expression:\"rtc_minimize\"}],staticClass:\"minimize-call flex flex-wrap horizontal-center\"},[_c('button',{staticClass:\"call-button\",on:{\"click\":_vm.maximize}}),_c('div',[_vm._v(_vm._s(_vm.clock_text))])])],2)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export default [\n    {\n        label: \"长草颜\",\n        children: [\n            {\n                \"name\": \"ywz_1\",\n                \"title\": \"不想活了\",\n                \"src\": \"/static/emoji/ywz/1.gif\"\n            },\n            {\n                \"name\": \"ywz_2\",\n                \"title\": \"不要啦\",\n                \"src\": \"/static/emoji/ywz/2.gif\"\n            },\n            {\n                \"name\": \"ywz_3\",\n                \"title\": \"买买买\",\n                \"src\": \"/static/emoji/ywz/3.gif\"\n            },\n            {\n                \"name\": \"ywz_4\",\n                \"title\": \"伤心\",\n                \"src\": \"/static/emoji/ywz/4.gif\"\n            },\n            {\n                \"name\": \"ywz_5\",\n                \"title\": \"剁剁剁\",\n                \"src\": \"/static/emoji/ywz/5.gif\"\n            },\n            {\n                \"name\": \"ywz_6\",\n                \"title\": \"加油\",\n                \"src\": \"/static/emoji/ywz/6.gif\"\n            },\n            {\n                \"name\": \"ywz_7\",\n                \"title\": \"厉害哦\",\n                \"src\": \"/static/emoji/ywz/7.gif\"\n            },\n            {\n                \"name\": \"ywz_8\",\n                \"title\": \"吃吃吃\",\n                \"src\": \"/static/emoji/ywz/8.gif\"\n            },\n            {\n                \"name\": \"ywz_9\",\n                \"title\": \"吓尿了\",\n                \"src\": \"/static/emoji/ywz/9.gif\"\n            },\n            {\n                \"name\": \"ywz_10\",\n                \"title\": \"哈哈\",\n                \"src\": \"/static/emoji/ywz/10.gif\"\n            },\n            {\n                \"name\": \"ywz_11\",\n                \"title\": \"喜欢你\",\n                \"src\": \"/static/emoji/ywz/11.gif\"\n            },\n            {\n                \"name\": \"ywz_12\",\n                \"title\": \"对不起\",\n                \"src\": \"/static/emoji/ywz/12.gif\"\n            },\n            {\n                \"name\": \"ywz_13\",\n                \"title\": \"小鲜肉\",\n                \"src\": \"/static/emoji/ywz/13.gif\"\n            },\n            {\n                \"name\": \"ywz_14\",\n                \"title\": \"快点\",\n                \"src\": \"/static/emoji/ywz/14.gif\"\n            },\n            {\n                \"name\": \"ywz_15\",\n                \"title\": \"惊吓\",\n                \"src\": \"/static/emoji/ywz/15.gif\"\n            },\n            {\n                \"name\": \"ywz_16\",\n                \"title\": \"生日快乐\",\n                \"src\": \"/static/emoji/ywz/16.gif\"\n            },\n            {\n                \"name\": \"ywz_17\",\n                \"title\": \"有钱\",\n                \"src\": \"/static/emoji/ywz/17.gif\"\n            },\n            {\n                \"name\": \"ywz_18\",\n                \"title\": \"生气\",\n                \"src\": \"/static/emoji/ywz/18.gif\"\n            },\n            {\n                \"name\": \"ywz_19\",\n                \"title\": \"美妙极了\",\n                \"src\": \"/static/emoji/ywz/19.gif\"\n            },\n            {\n                \"name\": \"ywz_20\",\n                \"title\": \"肚子饿\",\n                \"src\": \"/static/emoji/ywz/20.gif\"\n            },\n            {\n                \"name\": \"ywz_21\",\n                \"title\": \"臭美\",\n                \"src\": \"/static/emoji/ywz/21.gif\"\n            },\n            {\n                \"name\": \"ywz_22\",\n                \"title\": \"鄙视\",\n                \"src\": \"/static/emoji/ywz/22.gif\"\n            },\n            {\n                \"name\": \"ywz_23\",\n                \"title\": \"闪瞎啦\",\n                \"src\": \"/static/emoji/ywz/23.gif\"\n            },\n            {\n                \"name\": \"ywz_24\",\n                \"title\": \"鬼脸\",\n                \"src\": \"/static/emoji/ywz/24.gif\"\n            }\n        ],\n    },\n    {\n        label: \"野萌君\",\n        children: [\n            {\n                \"name\": \"ymj_0\",\n                \"title\": \"恭喜发财\",\n                \"src\": \"/static/emoji/ymj/0.gif\"\n            },\n            {\n                \"name\": \"ymj_1\",\n                \"title\": \"哀求\",\n                \"src\": \"/static/emoji/ymj/1.gif\"\n            },\n            {\n                \"name\": \"ymj_2\",\n                \"title\": \"加油\",\n                \"src\": \"/static/emoji/ymj/2.gif\"\n            },\n            {\n                \"name\": \"ymj_3\",\n                \"title\": \"滚\",\n                \"src\": \"/static/emoji/ymj/3.gif\"\n            },\n            {\n                \"name\": \"ymj_4\",\n                \"title\": \"哇\",\n                \"src\": \"/static/emoji/ymj/4.gif\"\n            },\n            {\n                \"name\": \"ymj_5\",\n                \"title\": \"好委屈\",\n                \"src\": \"/static/emoji/ymj/5.gif\"\n            },\n            {\n                \"name\": \"ymj_6\",\n                \"title\": \"我滚啦\",\n                \"src\": \"/static/emoji/ymj/6.gif\"\n            },\n            {\n                \"name\": \"ymj_7\",\n                \"title\": \"你慢慢吃\",\n                \"src\": \"/static/emoji/ymj/7.gif\"\n            },\n            {\n                \"name\": \"ymj_8\",\n                \"title\": \"好烦\",\n                \"src\": \"/static/emoji/ymj/8.gif\"\n            },\n            {\n                \"name\": \"ymj_9\",\n                \"title\": \"干不掉我\",\n                \"src\": \"/static/emoji/ymj/9.gif\"\n            },\n            {\n                \"name\": \"ymj_10\",\n                \"title\": \"出去玩\",\n                \"src\": \"/static/emoji/ymj/10.gif\"\n            },\n            {\n                \"name\": \"ymj_11\",\n                \"title\": \"哈哈\",\n                \"src\": \"/static/emoji/ymj/11.gif\"\n            },\n            {\n                \"name\": \"ymj_12\",\n                \"title\": \"睡觉\",\n                \"src\": \"/static/emoji/ymj/12.gif\"\n            },\n            {\n                \"name\": \"ymj_13\",\n                \"title\": \"看不惯我\",\n                \"src\": \"/static/emoji/ymj/13.gif\"\n            },\n            {\n                \"name\": \"ymj_14\",\n                \"title\": \"咋啦\",\n                \"src\": \"/static/emoji/ymj/14.gif\"\n            },\n            {\n                \"name\": \"ymj_15\",\n                \"title\": \"你最好了\",\n                \"src\": \"/static/emoji/ymj/15.gif\"\n            },\n            {\n                \"name\": \"ymj_16\",\n                \"title\": \"保佑我\",\n                \"src\": \"/static/emoji/ymj/16.gif\"\n            },\n            {\n                \"name\": \"ymj_17\",\n                \"title\": \"不\",\n                \"src\": \"/static/emoji/ymj/17.gif\"\n            },\n            {\n                \"name\": \"ymj_18\",\n                \"title\": \"嗯\",\n                \"src\": \"/static/emoji/ymj/18.gif\"\n            },\n            {\n                \"name\": \"ymj_19\",\n                \"title\": \"嗨\",\n                \"src\": \"/static/emoji/ymj/19.gif\"\n            },\n            {\n                \"name\": \"ymj_20\",\n                \"title\": \"么么哒\",\n                \"src\": \"/static/emoji/ymj/20.gif\"\n            },\n            {\n                \"name\": \"ymj_21\",\n                \"title\": \"刚怎么了\",\n                \"src\": \"/static/emoji/ymj/21.gif\"\n            },\n            {\n                \"name\": \"ymj_22\",\n                \"title\": \"好棒\",\n                \"src\": \"/static/emoji/ymj/22.gif\"\n            },\n            {\n                \"name\": \"ymj_23\",\n                \"title\": \"别闹\",\n                \"src\": \"/static/emoji/ymj/23.gif\"\n            }\n        ],\n    },\n];\n","// @see https://developer.mozilla.org/en-US/docs/Web/API/WebRTC_API/Perfect_negotiation\n\nexport default class WebRTC {\n    constructor(config = null) {\n        // @see https://gist.github.com/mondain/b0ec1cf5f60ae726202e\n        // @see https://gist.github.com/sagivo/3a4b2f2c7ac6e1b5267c2f1f59ac6c6b\n        // @see https://freestun.net/\n        // TEST STUN/TURN SERVER https://icetest.atec-systems.com/\n        this.config = config ? config : {\n            iceServers: [\n                {\n                    urls: [\"stun:stun.l.google.com:19302\", \"stun:stun.files.fm:3478\"],\n                },\n                {\n                    urls: 'turns:freestun.net:5350',\n                    username: 'free',\n                    credential: 'free',\n                },\n            ],\n        };\n        this.constraints = {\n            audio: true,\n            video: true\n        };\n\n        this.callbacks = {};\n        this.pcs = new Map();\n        this.stream = null;\n        this.timers = new Map();\n    }\n\n    setCallbacks(callbacks) {\n        const {onTrack, onNegotiateReady, onIceCandidate, onRemoteSteamClose} = callbacks;\n        this.callbacks.onTrack = onTrack;\n        this.callbacks.onNegotiateReady = onNegotiateReady;\n        this.callbacks.onIceCandidate = onIceCandidate;\n        this.callbacks.onRemoteSteamClose = onRemoteSteamClose;\n    }\n\n    setConstraints(constraints) {\n        this.constraints = constraints;\n    }\n\n    async open() {\n        try {\n            if (!this.stream) {\n                // [Caller] a. invite: 2. access the webcam and microphone\n                this.stream = await navigator.mediaDevices.getUserMedia(this.constraints);\n            }\n            return this.stream;\n        } catch (e) {\n            console.error(e);\n            switch (e.name) {\n                case \"NotFoundError\":\n                    alert(\"No camera or microphone were found.\");\n                    break;\n                case \"SecurityError\":\n                case \"PermissionDeniedError\":\n                    // Do nothing; this is the same as the user canceling the call.\n                    break;\n                default:\n                    alert(`Error opening your camera or microphone: ${e.message}`);\n                    break;\n            }\n            throw new Error(\"open media failed\");\n        }\n    }\n\n    create() {\n        // [Caller] a. invite: 1. create an RTCPeerConnection\n        let pc = new RTCPeerConnection(this.config);\n        let key = this.getPeerConnectionLastId();\n        this.pcs.set(key, pc);\n        pc.ontrack = ({ track, streams }) => {\n            track.onunmute = () => {\n                // set remote video srcObject\n                this.callbacks.onTrack(key, streams);\n            };\n        };\n\n        pc.onnegotiationneeded = async (e) => {\n            try {\n                let pc = e.target;\n                // [Caller] b. ready to negotiate: 1. create(set) an SDP offer\n                // see https://webrtc.github.io/samples/src/content/peerconnection/restart-ice/\n                let offer = await pc.createOffer({\n                    iceRestart: true,\n                });\n                offer.sdp = this.replaceSDP(offer.sdp);\n                await pc.setLocalDescription(offer);\n\n                // [Caller] b. ready to negotiate: 2. send the offer\n                // type: video-offer\n                this.callbacks.onNegotiateReady(key, pc.localDescription);\n            } catch (e) {\n                console.error('onnegotiationneeded error', e);\n            }\n        };\n\n        pc.onicecandidate = ({ candidate }) => {\n            // type: new-ice-candidate\n            this.callbacks.onIceCandidate(key, candidate);\n        };\n\n\n        pc.oniceconnectionstatechange = (e) => {\n            let pc = e.target;\n            console.log('oniceconnectionstatechange', pc.iceConnectionState);\n            switch (pc.iceConnectionState) {\n                case \"closed\":\n                {\n                    this.close(key);\n                    break;\n                }\n                case \"failed\":\n                {\n                    pc.restartIce();\n                    break;\n                }\n                case \"disconnected\":\n                {\n                    this.timers.set(key, setTimeout((pc) => {\n                        console.log('restart ice');\n                        pc.restartIce();\n                    }, 3000, pc));\n                    break;\n                }\n                case \"connected\":\n                {\n                    this.timers.has(key) && clearTimeout(this.timers.get(key));\n                    break;\n                }\n            }\n        };\n\n        pc.onicegatheringstatechange = (e) => {\n            let pc = e.target;\n            console.log('onicegatheringstatechange', pc.iceGatheringState);\n        };\n\n        pc.onsignalingstatechange = (e) => {\n            let pc = e.target;\n            console.log('onsignalingstatechange', pc.signalingState);\n            switch (pc.signalingState) {\n                case \"closed\":\n                {\n                    this.close(key);\n                    break;\n                }\n            }\n        }\n\n        return key;\n    }\n\n    addTrack(key) {\n        let pc = this.pcs.get(key);\n        // [Caller] a. invite: 3. add the local stream's tracks\n        for (const track of this.stream.getTracks()) {\n            pc.addTrack(track, this.stream);\n        }\n    }\n\n    close(key) {\n        let pc = this.pcs.get(key);\n        pc.ontrack = null;\n        pc.onremovetrack = null;\n        pc.onremovestream = null;\n        pc.onicecandidate = null;\n        pc.oniceconnectionstatechange = null;\n        pc.onsignalingstatechange = null;\n        pc.onicegatheringstatechange = null;\n        pc.onnegotiationneeded = null;\n\n        pc.close();\n        pc = null;\n        this.pcs.delete(key);\n        this.timers.delete(key);\n\n        // stop video track\n        this.callbacks.onRemoteSteamClose(key);\n    }\n\n    closeAll() {\n        this.pcs.forEach((pc, key) => {\n            this.close(key);\n        });\n        this.pcs.clear();\n        this.stream = null;\n        this.timers.clear();\n    }\n\n    getPeerConnectionLastId() {\n        return this.pcs.size;\n    }\n\n    async handleVideoOfferMsg(description, reuse_key = -1) {\n        let key, pc;\n        if (-1 === reuse_key) {\n            // [Callee] received video-offer: 1. Create an RTCPeerConnection\n            key = this.create();\n            pc = this.pcs.get(key);\n            // [Callee] a. received video-offer: 2. set remote SDP\n            await pc.setRemoteDescription(description);\n            // [Callee] a. received video-offer: 3. access the webcam and microphone\n            // [Callee] a. received video-offer: 4. add the local stream's tracks\n            // [Callee] a. received video-offer: 5. create(set) an SDP answer\n            await this.open();\n            this.addTrack(key);\n        } else {\n            key = reuse_key;\n            pc = this.pcs.get(key);\n            await pc.setRemoteDescription(description);\n        }\n\n        let answer = await pc.createAnswer();\n        answer.sdp = this.replaceSDP(answer.sdp);\n        await pc.setLocalDescription(answer);\n        // [Callee] a. received video-offer: 6. send the answer\n        // type: video-answer\n        return {key, description: pc.localDescription};\n    }\n\n    async handleVideoAnswerMsg(key, description) {\n        try {\n            // [Caller] c. received video-answer : 1. create(set) an SDP\n            let pc = this.pcs.get(key);\n            return await pc.setRemoteDescription(description);\n        } catch (e) {\n            console.log('setRemoteDescription error', e);\n        }\n    }\n\n    async handleNewICECandidateMsg(key, candidate) {\n        try {\n            let pc = this.pcs.get(key);\n            return await pc.addIceCandidate(candidate);\n        } catch (e) {\n            console.log('addIceCandidate error', e);\n        }\n    }\n\n    replaceSDP(sdp) {\n        // audio quality https://stackoverflow.com/questions/46063374/is-it-really-possible-for-webrtc-to-stream-high-quality-audio-without-noise\n        return sdp.replace('useinbandfec=1', 'useinbandfec=1; stereo=1; maxaveragebitrate=128000');\n    }\n}","export default class Constant {\n    static DEBUG = true;\n    static DEFAULT_AVATAR = \"/static/chat.png\";\n    static MAX_LIMITS = 100; //断线最大重连次数\n    static COOKIE_EXPIRE_DAYS = 7; //cookie过期天数\n    static MAX_IMAGE_SIZE = 1024 * 1024 * 4; //最大上传图片尺寸\n    static MAX_MUSIC_SIZE = 1024 * 1024 * 16; //最大音乐尺寸\n    static MAX_FILE_SIZE = 1024 * 1024 * 50; //最大音乐尺寸\n\n    // 文本消息\n    static MESSAGE_COMMON = 100;\n    static MESSAGE_SELF = 101;\n    static MESSAGE_OTHER = 102;\n    static MESSAGE_PERSONAL = 103;\n\n    // 用户\n    static USER_ONLINE = 200;//用户上线\n    static USER_QUIT = 201;//用户退出\n    static USER_LIST = 202;//用户列表\n    static USER_QUERY = 203; //用户查询\n    static USER_REGISTER = 204;//用户注册\n    static USER_LOGIN = 205; // 用户登录\n    static USER_DISABLED = 206;//用户禁用\n    static USER_DOWNLINE = 207;//用户下线\n    static USER_INCORRECT = 208;//用户名/密码错误\n    static USER_REMOVE = 209;//用户移除\n    static USER_AVATAR_UPLOAD = 210;//上传头像\n    static USER_AVATAR_SUCCESS = 211;//上传成功\n    static USER_AVATAR_FAIL = 212;//上传失败\n    static USER_ONLINE_TOTAL = 213; // 用户在线数量\n\n    // 图片\n    static IMAGE_COMMON = 300;\n    static IMAGE_SELF = 301;\n    static IMAGE_OTHER = 302;\n    static IMAGE_PERSONAL = 303;\n\n    // 音乐\n    static MUSIC_COMMON = 500;\n    static MUSIC_SELF = 501;\n    static MUSIC_OTHER = 502;\n    static MUSIC_PERSONAL = 503;\n\n    // 文件\n    static FILE_COMMON = 1000;\n    static FILE_SELF = 1001;\n    static FILE_OTHER = 1002;\n    static FILE_PERSONAL = 1003;\n\n    // 群聊\n    static GROUP_CREATE = 1100;\n    static GROUP_QUERY_LIST = 1101;\n    static GROUP_QUERY_MEMBER = 1102;\n    static GROUP_QUERY_INFO = 1103;\n// static GROUP_JOIN = 1104;\n// static GROUP_EXIT = 1105;\n// static GROUP_DEL = 1106;\n\n    // RTC\n    static RTC_CREATE = 600;\n    static RTC_JOIN = 601;\n    static RTC_MESSAGE = 602;\n    static RTC_OFFLINE = 603;\n    static RTC_CLOSE = 604;\n    static RTC_EXIT = 605;\n\n    // 历史记录\n    static HISTORY_MESSAGE_COMMON = 800;\n    static HISTORY_MESSAGE_PERSONAL = 801;\n\n    // 通知\n    static ERROR = 900;\n    static WARNING = 901;\n    static SYSTEM = 902;\n    static FILE_UPLOAD_SUCCESS = 903;\n}\n","export default class IMessage {\n    setNext(next) {\n        this.next = next;\n    }\n\n    getNext() {\n        return this.next;\n    }\n\n    //process(vm, mess) {}\n}","// import {unpack, pack} from 'msgpackr';\n\nexport class DataHelper {\n    static encode(obj) {\n        // return pack(obj);\n        return JSON.stringify(obj);\n    }\n\n    static decode(str) {\n        return JSON.parse(str);\n        // return unpack(new Uint8Array(str)); //ArrayBuffer->Uint8Array\n    }\n\n    static toObject(obj) {\n        let target = {};\n        for (let key in obj) {\n            target[key] = obj[key];\n        }\n        return target;\n    }\n\n    static buildTraceId() {\n        return Math.random().toString(36).substr(2,10);\n    }\n\n    static async sha256(blob) {\n        // @see https://developer.mozilla.org/zh-CN/docs/Web/API/SubtleCrypto/digest\n        let buffer = await blob.arrayBuffer();\n        let hashBuffer = await crypto.subtle.digest(\"SHA-256\", buffer);\n        let hashArray = Array.from(new Uint8Array(hashBuffer)); // 将缓冲区转换为字节数组\n        return hashArray.map((b) => b.toString(16).padStart(2, \"0\")).join(\"\"); // 将字节数组转换为十六进制字符串\n    }\n}\n\nString.prototype.replaceMulti = function (search, replace) {\n    let str = this;\n    search.forEach((value, key) => {\n        str = str.replace(new RegExp(value, 'gi'), replace[key]);\n    });\n    return str;\n};\n\nDate.prototype.format = function (format = 'Y-m-d H:i:s') {\n    let search = ['Y', 'm', 'd', 'H', 'i', 's', 'y'];\n    let replace = [this.getFullYear(), (this.getMonth() + 1).toString().padStart(2, '0'),\n        this.getDate().toString().padStart(2, '0'), this.getHours().toString().padStart(2, '0'),\n        this.getMinutes().toString().padStart(2, '0'), this.getSeconds().toString().padStart(2, '0'),\n        this.getFullYear().toString().padStart(4, '0').substring(2)];\n    return format.replaceMulti(search, replace);\n};\n\nDate.prototype.formatUTC = function (format = 'Y-m-d H:i:s') {\n    let search = ['Y', 'm', 'd', 'H', 'i', 's', 'y'];\n    let replace = [this.getUTCFullYear(), (this.getUTCMonth() + 1).toString().padStart(2, '0'),\n        this.getUTCDate().toString().padStart(2, '0'), this.getUTCHours().toString().padStart(2, '0'),\n        this.getUTCMinutes().toString().padStart(2, '0'), this.getUTCSeconds().toString().padStart(2, '0'),\n        this.getUTCFullYear().toString().padStart(4, '0').substring(2)];\n    return format.replaceMulti(search, replace);\n};\n\nexport function generateUUID() {\n    let time = new Date().getTime();\n    time += performance.now();\n    return \"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\".replace(/[xy]/g, function(\n        char,\n    ) {\n        let rand = (time + Math.random() * 16) % 16 | 0;\n        time = Math.floor(time / 16);\n        return (char === \"x\" ? rand : (rand & 0x3) | 0x8).toString(16);\n    });\n}\n","export default class IProcessor {\n    constructor() {\n        this.methods = this.getMethods();\n        this.data = this.getData;\n    }\n\n    getData() {}\n\n    getMethods() {}\n}","import IMessage from \"./imessage.js\";\nimport Constant from \"./constant.js\";\nimport {DataHelper, generateUUID} from \"./util.js\";\nimport IProcessor from \"./iprocessor.js\";\n\nexport class GeneralMessage extends IMessage {\n    process(vm, mess) {\n        switch (mess.type) {\n            // 用户状态\n            // myself @other TODO 修改消息样式\n            case Constant.MESSAGE_SELF:\n            case Constant.IMAGE_SELF:\n            case Constant.FILE_SELF:\n            case Constant.MUSIC_SELF:\n                break;\n            case Constant.USER_REGISTER: // 需要注册\n                vm.$modal.show('login-modal');\n                break;\n            case Constant.USER_INCORRECT: // 登录出错\n                vm.$notify({\n                    group: 'tip',\n                    text: mess.mess,\n                    type: 'error',\n                });\n                break;\n            case Constant.USER_LOGIN: // 已经登录\n            {\n                let user = mess.user;\n                // 隐藏modal\n                vm.$modal.hide('login-modal');\n                // 更新vm.user\n                vm.user.id = user.user_id;\n                vm.user.displayName = user.username;\n                vm.user.avatar = user.avatar ? vm.upload_url + user.avatar : Constant.DEFAULT_AVATAR;\n                vm.user.is_active = parseInt(user.is_active)\n                vm.user.is_super_admin = user.is_super_admin;\n                // 刷新cookie 在线用户列表\n                vm.setCookie(\"user\", JSON.stringify(vm.user));\n                vm.online_users.set(user.user_id, user);\n                vm.$notify({\n                    group: 'tip',\n                    text: `${vm.user.displayName}，欢迎回来`,\n                    type: 'success',\n                });\n\n                // 查询在线人数\n                vm.sendMessage(Constant.USER_ONLINE_TOTAL);\n\n                // 查询群组列表\n                vm.sendMessage(Constant.GROUP_QUERY_LIST);\n\n                // 查询在线用户\n                vm.sendMessage(Constant.USER_LIST);\n                break;\n            }\n            case Constant.USER_LIST: // 在线用户\n            {\n                let users = mess.users;\n                for (let user of users) {\n                    vm.online_users.set(user.user_id, user);\n                }\n                break;\n            }\n            case Constant.USER_ONLINE://欢迎消息\n            {\n                let user = mess.user;\n                // 联系人\n                vm.im.appendMessage({\n                    id: generateUUID(),\n                    status: \"succeed\",\n                    type: \"event\",\n                    sendTime: mess.timestamp,\n                    content: `用户 ${user.username} 进入聊天室`,\n                    toContactId: \"0\",\n                }, true);\n                if (vm.user.id !== user.user_id) {\n                    ++vm.online_total;\n                    user.is_online = true;\n                    vm.online_users.set(user.user_id, user);\n                    vm.updateContact(user.user_id, {is_online: true});\n                    vm.updateContact(\"0\", {online_total:vm.online_total, unread: \"+1\"});\n                }\n                break;\n            }\n            case Constant.USER_ONLINE_TOTAL:\n                vm.online_total = mess.mess; // 置为实际数量\n                vm.updateContact(\"0\", {online_total:vm.online_total});\n                break;\n            case Constant.USER_QUIT:\n            {\n                let user = mess.user;\n                if (vm.user.id !== user.user_id) {\n                    vm.im.appendMessage({\n                        id: generateUUID(),\n                        status: \"succeed\",\n                        type: \"event\",\n                        sendTime: mess.timestamp,\n                        content: `用户 ${user.username} 退出聊天室`,\n                        toContactId: \"0\",\n                        fromUser: \"\"\n                    }, true);\n                    vm.online_total = Math.max(--vm.online_total, 1);\n                    vm.online_users.delete(user.user_id);\n                    vm.updateContact(\"0\", {online_total:vm.online_total, unread: \"+1\"});\n                    vm.updateContact(user.user_id, {is_online: false});\n                }\n                break;\n            }\n            case Constant.USER_QUERY:\n            {\n                let user = mess.user;\n                let user_id = user.user_id;\n                vm.addUser(user);\n                // 执行下一步\n                let resolve = vm.query_next.get(user_id);\n                if (resolve) {\n                    resolve(user);\n                }\n                break;\n            }\n            case Constant.USER_DOWNLINE://下线\n            case Constant.USER_REMOVE://移除\n            case Constant.USER_DISABLED: //禁用\n            {\n                vm.user.is_active = 0;\n                vm.disconnect_mess = mess.mess;\n                vm.$modal.show('disconnect-modal');\n                break;\n            }\n\n            case Constant.USER_AVATAR_SUCCESS: {\n                vm.user.avatar = vm.upload_url + mess.mess;\n                // 刷新cookie\n                vm.setCookie(\"user\", JSON.stringify(vm.user));\n                // 刷新在线用户\n                let user = vm.online_users.get(vm.user.id);\n                user.avatar = mess.mess;\n                vm.online_users.set(vm.user.id, user);\n                vm.$notify({\n                    group: 'tip',\n                    text: '上传头像成功',\n                    type: 'success',\n                });\n                break;\n            }\n            case Constant.USER_AVATAR_FAIL: {\n                vm.$notify({\n                    group: 'tip',\n                    text: '上传头像失败',\n                    type: 'warn',\n                });\n                break;\n            }\n\n            // 公共、个人消息\n            case Constant.MESSAGE_COMMON: //公共消息\n            case Constant.MESSAGE_OTHER: //other @me\n            case Constant.IMAGE_COMMON:\n            case Constant.IMAGE_OTHER:\n            case Constant.MUSIC_COMMON:\n            case Constant.MUSIC_OTHER:\n            case Constant.FILE_COMMON:\n            case Constant.FILE_OTHER:\n            {\n                let sender_id = mess.sender_id;\n                if (sender_id === vm.user.id) return; // 自己发的，忽略，避免重复\n\n                // 查询收信人（群组）\n                let receiver_id = mess.receiver_id;\n                let is_group = receiver_id && (receiver_id !== vm.user.id);\n                if (is_group) {\n                    let contact = vm.im.findContact(receiver_id);\n                    if (!contact) {\n                        vm.sendMessage(Constant.GROUP_QUERY_INFO, '0', receiver_id);\n                        let promise = new Promise((resolve) => {\n                            vm.query_group_next.set(receiver_id, resolve);\n                        });\n                        promise.then((group) => {\n                            vm.query_group_next.delete(group.id);\n                            // 添加联系人\n                            vm.addGroupContact(group);\n                        });\n                    }\n                }\n\n                // 查询发信人，若找不到用户，则查询异步处理\n                vm.getUserAsync(sender_id, (user) => {\n                    vm.addPersonalContact(user);\n                    vm.receiveMessage(mess, user);\n                });\n                break;\n            }\n\n            case Constant.HISTORY_MESSAGE_COMMON:\n            case Constant.HISTORY_MESSAGE_PERSONAL:\n            {\n                let contact_id = mess.receiver_id;\n                let resolve = vm.pull_next.get(contact_id);\n                if (resolve) {\n                    resolve(mess);\n                }\n                break;\n            }\n\n            // 文件上传\n            case Constant.FILE_UPLOAD_SUCCESS:\n            {\n                // hash, path, size\n                let resolve = vm.upload_next.get(mess.mess.hash);\n                resolve(mess.mess);\n                break;\n            }\n\n            // 通知\n            case Constant.ERROR:\n            case Constant.WARNING:\n            case Constant.SYSTEM:\n            {\n                vm.receiveMessage(mess);\n                break;\n            }\n\n            default:\n            {\n                this.next.process(vm, mess);\n                break;\n            }\n        }\n    }\n}\n\nexport class GeneralProcessor extends IProcessor {\n    getData() {\n        return {\n            im: null,\n            server_url: process.env.VUE_APP_SERVER_URL,\n            upload_url: process.env.VUE_APP_UPLOAD_URL,\n            default_avatar_url: Constant.DEFAULT_AVATAR,\n            width: window.innerWidth - 16,\n            height: window.innerHeight - 16,\n            username: \"\",\n            password: \"\",\n            user: {\n                id: 0, displayName: '',\n                avatar: Constant.DEFAULT_AVATAR,\n                is_active: 1,\n                is_super_admin: false,\n            },\n            socket: null,\n            reconnect_times: 0,\n            disconnect_mess: \"\",\n            online_total: 0,\n            online_users: new Map(),\n            pull_next: new Map(),\n            send_next: new Map(),\n            query_next: new Map(),\n            upload_next: new Map(),\n            query_member_next: new Map(),\n            query_group_next: new Map(),\n            images: [],\n            image_crop: {\n                show: false,\n            },\n        };\n    }\n\n    getMethods() {\n        return {\n            // 回调方法\n            onOpen() {\n                // 从cookie中获取信息\n                let user = JSON.parse(this.getCookie('user'));\n                if (typeof user === 'object') {\n                    this.user.id = user.id;\n                    this.user.displayName = user.displayName;\n                    this.user.avatar = user.avatar ? user.avatar : Constant.DEFAULT_AVATAR;\n                    this.user.is_active = parseInt(user.is_active)\n                    this.user.is_super_admin = user.is_super_admin;\n                    this.sendMessage(Constant.USER_LOGIN);\n                } else {\n                    this.$modal.show('login-modal');\n                }\n            },\n            onMessage(message) {\n                let mess = DataHelper.decode(message.data);\n                mess.timestamp = mess.timestamp * 1000;\n                this.trace(\"receive\", mess);\n                this.$modal.hide('disconnect-modal');\n                this.message_handler.process(this, mess);\n            },\n            onClose() {\n                // 联系人离线\n                if (!this.user.is_active) return; // 被禁用\n                if (this.socket.readyState === WebSocket.OPEN) return; // 重试多次时，避免连接成功后再次调用\n\n                this.disconnect_mess = (new Date()).format() + ' 已断线，重试中...';\n                this.$modal.show('disconnect-modal');\n                let timer;\n                let handler = () => {\n                    try {\n                        //断线重连\n                        if (this.reconnect_times >= Constant.MAX_LIMITS) {\n                            window.clearInterval(timer);\n                            this.$notify({\n                                group: 'tip',\n                                text: '无法连接到服务器，请稍候再试',\n                                type: 'warn',\n                            });\n                            return this.$modal.hide('disconnect-modal');\n                        }\n                        if (this.socket.readyState === WebSocket.OPEN) {\n                            window.clearInterval(timer);\n                            this.socket.addEventListener('message', this.onMessage);\n                            this.socket.addEventListener('close', this.onClose);\n                            this.socket.addEventListener('error', this.onError);\n\n                            this.onOpen();\n\n                            this.reconnect_times = 0;\n                            return this.$modal.hide('disconnect-modal');\n                        }\n                        this.socket = new WebSocket(this.server_url);\n                        this.socket.binaryType = 'arraybuffer';\n                        this.reconnect_times++;\n                    } catch (e) {\n                        this.trace(e);\n                    }\n                };\n                timer = window.setInterval(handler, 2000);\n            },\n            onError(e) {\n                this.trace(e);\n                this.$notify({\n                    group: 'tip',\n                    text: '连接服务器出错',\n                    type: 'error',\n                });\n            },\n\n            // 工具方法\n            timeFormat(timestamp) {\n                let date = new Date(timestamp);\n                let is_today = ((new Date()).getTime() - date.getTime() < 8.64e7);\n                let format = is_today ? 'H:i' : 'y.m.d H:i';\n                return date.format(format);\n            },\n            trace() {\n                if (!Constant.DEBUG)\n                    return;\n                let now = (window.performance.now() / 1000).toFixed(3);\n                console.group(now);\n                console.log(...arguments);\n                console.groupEnd();\n            },\n            getCookie(name) {\n                let nameEQ = name + \"=\";\n                let ca = document.cookie.split(';');    //把cookie分割成组\n                for (let c of ca) {\n                    while (c.charAt(0) === ' ') {          //判断一下字符串有没有前导空格\n                        c = c.substring(1, c.length);      //有的话，从第二位开始取\n                    }\n                    if (c.indexOf(nameEQ) === 0) {       //如果含有我们要的name\n                        return unescape(c.substring(nameEQ.length, c.length));    //解码并截取我们要值\n                    }\n                }\n                return false;\n            },\n            setCookie(name, value) {\n                let exp = new Date();\n                exp.setTime(exp.getTime() + Constant.COOKIE_EXPIRE_DAYS * 24 * 60 * 60 * 1000);\n                document.cookie = name + \"=\" + escape(value) + \";expires=\" + exp.toGMTString();\n            },\n            sendMessage(type, receiver_id = '0', mess = null, id = \"\", trace_id = \"\") {\n                let defaults = {\n                    type: Constant.MESSAGE_COMMON,\n                    receiver_id: '0',\n                    mess: \"\",\n                    trace_id: trace_id ? trace_id : DataHelper.buildTraceId(),\n                };\n                let data = Object.assign(defaults, {\n                    type,\n                    sender_id: this.user.id,\n                    receiver_id,\n                    mess,\n                });\n                if (id) data.id = id;\n                this.trace(\"send\", data);\n                this.socket.send(DataHelper.encode(data));\n            },\n            parseMessage(mess, sender = null) {\n                let id, type, content, fileSize, fileName;\n                id = mess.id;\n                switch (mess.type) {\n                    case Constant.MESSAGE_COMMON:\n                    case Constant.MESSAGE_SELF:\n                    case Constant.MESSAGE_OTHER:\n                    {\n                        type = \"text\";\n                        content = mess.mess;\n                        fileSize = 0;\n                        fileName = \"\";\n                        break;\n                    }\n                    case Constant.IMAGE_COMMON:\n                    case Constant.IMAGE_SELF:\n                    case Constant.IMAGE_OTHER:\n                    {\n                        type = \"image\";\n                        content = this.upload_url + mess.mess.path;\n                        fileSize = mess.mess.size;\n                        fileName = mess.mess.name;\n                        break;\n                    }\n                    case Constant.FILE_COMMON:\n                    case Constant.FILE_SELF:\n                    case Constant.FILE_OTHER:\n                    {\n                        type = \"file\";\n                        content = this.upload_url + mess.mess.path;\n                        fileSize = mess.mess.size;\n                        fileName = mess.mess.name;\n                        break;\n                    }\n                    case Constant.MUSIC_COMMON:\n                    case Constant.MUSIC_SELF:\n                    case Constant.MUSIC_OTHER:\n                    {\n                        type = \"music\";\n                        content = this.upload_url + mess.mess.path;\n                        fileSize = mess.mess.size;\n                        fileName = mess.mess.name;\n                        break;\n                    }\n                    case Constant.GROUP_CREATE:\n                    {\n                        type = \"event\";\n                        let admin_name = (sender.user_id === this.user.id) ? \"你\" : sender.username;\n                        content = admin_name + \"创建了群聊\";\n                        fileSize = 0;\n                        fileName = \"\";\n                        break;\n                    }\n                    case Constant.ERROR:\n                    case Constant.WARNING:\n                    case Constant.SYSTEM:\n                    {\n                        id = generateUUID();\n                        type = \"event\";\n                        content = mess.mess;\n                        fileSize = 0;\n                        fileName = \"\";\n                        break;\n                    }\n                }\n                let toContactId;\n                switch (mess.type) {\n                    case Constant.MESSAGE_OTHER:\n                    case Constant.IMAGE_OTHER:\n                    case Constant.FILE_OTHER:\n                    case Constant.MUSIC_OTHER:\n                    {\n                        toContactId = mess.sender_id;\n                        break;\n                    }\n                    default:\n                    {\n                        toContactId = mess.receiver_id;\n                        break;\n                    }\n                }\n                return {\n                    id: id,\n                    status: \"succeed\",\n                    type,\n                    sendTime: mess.timestamp,\n                    content,\n                    toContactId,\n                    fileSize,\n                    fileName,\n                    fromUser: {\n                        //如果 id == this.user.id消息会显示在右侧，否则在左侧\n                        id: mess.sender_id,\n                        displayName: sender ? sender.username : '',\n                        avatar: sender && sender.avatar ? this.upload_url + sender.avatar : Constant.DEFAULT_AVATAR,\n                    }\n                };\n            },\n            receiveMessage(mess, sender = null) {\n                let parsed = this.parseMessage(mess, sender);\n                this.trace('parsed', parsed);\n                this.im.appendMessage(parsed, true);\n                // this.updateContact(parsed.toContactId, {unread: \"+1\"});\n            },\n            updateContact(contact_id, option) {\n                this.im.updateContact({\n                    id: contact_id,\n                    ...option,\n                });\n            },\n            addPersonalContact(user, lastMessage = \"\") {\n                let data = {\n                    id: user.user_id,\n                    displayName: user.username,\n                    avatar: user.avatar ? this.upload_url + user.avatar : Constant.DEFAULT_AVATAR,\n                    lastContent: lastMessage,\n                    index: \"Personal\",\n\n                    // 新加字段\n                    is_group: false,\n                    is_online: user.is_online,\n                    query_time: ((new Date()).getTime() + performance.now()) / 1000,\n                };\n                this.im.appendContact(data);\n            },\n            addUser(user) {\n                return this.online_users.set(user.user_id, user);\n            },\n            getUser(user_id) {\n                return this.online_users.get(user_id);\n            },\n            getUserAsync(user_id, callback = new Function()) {\n                let user = this.getUser(user_id);\n                if (user) {\n                    callback(user);\n                } else {\n                    this.sendMessage(Constant.USER_QUERY, user_id, user_id);\n                    let promise = new Promise((resolve) => {\n                        this.query_next.set(user_id, resolve);\n                    });\n                    promise.then((user) => {\n                        this.query_next.delete(user.user_id);\n                        // 添加联系人\n                        this.addPersonalContact(user);\n                        return user;\n                    }).then(callback);\n                }\n            },\n            addGroupContact(group, lastMessage = \"\", members = new Map()) {\n                let data = {\n                    id: group.id,\n                    displayName: group.name,\n                    avatar: group.avatar ? this.upload_url + group.avatar : Constant.DEFAULT_AVATAR,\n                    lastContent: lastMessage,\n                    index: \"Group\",\n\n                    // 新加字段\n                    online_total: 0,\n                    is_group: true,\n                    members: members,\n                    query_time: ((new Date()).getTime() + performance.now()) / 1000,\n                };\n                this.im.appendContact(data);\n            },\n\n            // 交互方法\n            login(e) {\n                e.preventDefault();\n                let username = this.username.trim();\n                if (username.length < 3) {\n                    this.$notify({\n                        group: 'tip',\n                        text: \"用户名需要3字符以上\",\n                        type: 'error',\n                    });\n                    return false;\n                }\n                // 登录/注册\n                this.socket.send(DataHelper.encode({\n                    type: Constant.USER_REGISTER,\n                    username: username.substr(0, 30),\n                    password: this.password ? this.password : '123456',\n                }));\n                return false;\n            },\n            getHistory(contact, next) {\n                let query_time = (contact.query_time > 0) ? contact.query_time : ((new Date()).getTime() + performance.now()) / 1000;\n                let type = contact.is_group ? Constant.HISTORY_MESSAGE_COMMON : Constant.HISTORY_MESSAGE_PERSONAL;\n                // 异步查询历史消息\n                let promise = new Promise((resolve, reject) => {\n                    try {\n                        this.sendMessage(type, contact.id, query_time);\n                        this.pull_next.set(contact.id, resolve); // 保存resolve\n                    } catch (e) {\n                        reject(e);\n                        this.trace(e);\n                    }\n                });\n                promise.then((mess) => {\n                    let query_id_list = new Set(); // 要查询的唯一用户ID\n                    let contact_id = mess.receiver_id;\n                    let list = mess.mess;\n                    this.pull_next.delete(contact_id); // 清除resolve\n                    // 更新下次查询时间（以第1条消息为准），精确到4位，和服务器保持一致，并去除边界的一条\n                    list.length && (contact.query_time = list[0].timestamp - 0.0001);\n\n                    // 查询未知的用户信息，消息列表需要展示昵称和头像\n                    for (let one of list) {\n                        let sender_id = one.sender_id;\n                        let user = this.getUser(sender_id);\n                        if (!user) {\n                            query_id_list.add(sender_id);\n                        }\n                    }\n                    let promise_list = [];\n                    query_id_list.forEach((user_id) => {\n                        let promise2 = new Promise((resolve) => {\n                            this.query_next.set(user_id, resolve);\n                            this.sendMessage(Constant.USER_QUERY, user_id, \"\", \"\", user_id);\n                        });\n                        promise2.then((user) => {\n                            this.addPersonalContact(user);\n                        });\n                        promise_list.push(promise2);\n                    });\n                    // 用户信息全部查询完毕，再处理消息\n                    Promise.all(promise_list).then(() => {\n                        let messages = [];\n                        for (let one of list) {\n                            let sender_id = one.sender_id;\n                            let user = this.getUser(sender_id);\n                            one.timestamp = one.timestamp * 1000;\n                            messages.push(this.parseMessage(one, user));\n                        }\n                        let is_end = (list.length < 10);\n                        // 将第二个参数设为true，表示已到末尾\n                        next(messages, is_end);\n\n                        // 清除resolve\n                        query_id_list.forEach((user_id) => {\n                            this.query_next.delete(user_id);\n                        });\n                    });\n                });\n            },\n            // 发送消息\n            send(message, next, file) {\n                try {\n                    this.trace('@send', message, file);\n\n                    // 有文件时，修正type\n                    if (file) {\n                        let music_types = [\n                            \"audio/mpeg\",\n                        ];\n                        if (music_types.includes(file.type)) {\n                            message.type = \"music\";\n                        }\n                    }\n\n                    let receiver_id = message.toContactId;\n                    let contact = this.im.findContact(receiver_id);\n                    let is_personal = !contact.is_group + 0;\n                    let type_map = {\n                        \"image\": [Constant.IMAGE_COMMON, Constant.IMAGE_PERSONAL],\n                        \"file\": [Constant.FILE_COMMON, Constant.FILE_PERSONAL],\n                        \"text\": [Constant.MESSAGE_COMMON, Constant.MESSAGE_PERSONAL],\n                        \"music\": [Constant.MUSIC_COMMON, Constant.MUSIC_PERSONAL],\n                    };\n                    let type = type_map[message.type][is_personal];\n\n                    // 文本直接发送\n                    if (!file) {\n                        this.sendMessage(type, receiver_id, message.content, message.id);\n                        return next();\n                    }\n\n                    // 文件处理\n                    // audio/mpeg image/png\n                    let limit_size;\n                    switch (message.type) {\n                        case \"image\":\n                        default:\n                            limit_size = Constant.MAX_IMAGE_SIZE;\n                            break;\n                        case \"music\":\n                            limit_size = Constant.MAX_MUSIC_SIZE;\n                            break;\n                        case \"file\":\n                            limit_size = Constant.MAX_FILE_SIZE;\n                            break;\n                    }\n                    if (file.size > limit_size) {\n                        this.$notify({\n                            group: 'tip',\n                            text: '文件太大，限制：<' + (limit_size / 1024 ** 2) + 'M',\n                            type: 'error',\n                        });\n                        return next({status:'failed'});\n                    }\n\n                    this.socket.send(file); // WebSocket发送文件时无法携带其他信息\n                    let message_id = message.id;\n                    let hashing = DataHelper.sha256(file);\n                    hashing.then((hash) => {\n                        return new Promise((resolve) => {\n                            this.upload_next.set(hash, resolve);\n                        });\n                    }).then((info) => {\n                        let {hash, path} = info;\n                        this.upload_next.delete(hash);\n                        let data = {\n                            name: file.name,\n                            path,\n                            size: file.size,\n                        };\n                        this.sendMessage(type, receiver_id, data, message.id);\n                        // 更新此条消息的URL\n                        this.im.updateMessage({\n                            id: message_id,\n                            content: this.upload_url + path,\n                        });\n                        next();\n                    });\n                } catch (e) {\n                    this.trace(e);\n                    next({status:'failed'});\n                }\n            },\n\n            // 打开/关闭抽屉，展示群组/私聊成员\n            toggleDrawer() {\n                // let self = this;\n                this.im.changeDrawer({\n                    position: \"rightInside\",\n                    offsetY: 33,\n                    width: 242,\n                    height: this.$el.clientHeight - 33,\n                });\n            },\n\n            // 消息点击\n            messageClick(e, key, message) {\n                let contact_id = message.toContactId;\n                // 标记为已读\n                this.updateContact(contact_id, {unread: 0});\n\n                switch (message.type) {\n                    case \"image\":\n                    {\n                        this.imagePreview(message.content);\n                        break;\n                    }\n                    case \"file\":\n                    {\n                        window.open(message.content);\n                        break;\n                    }\n                }\n            },\n\n            // 切换联系人\n            changeContact(contact) {\n                let contact_id = contact.id;\n                this.updateContact(contact_id, {unread: 0});\n                if (contact.is_group && contact_id && !contact.members.size) {\n                    // 查询成员\n                    let group_id = contact_id;\n                    this.sendMessage(Constant.GROUP_QUERY_MEMBER, 0, group_id);\n                    // TODO 更新列表\n                    let promise = new Promise((resolve) => {\n                        this.query_member_next.set(group_id, resolve);\n                    });\n                    promise.then((members) => {\n                        members.forEach((member) => {\n                            contact.members.set(member.user_id, member);\n                        });\n                        this.$forceUpdate();\n                    });\n                }\n            },\n\n            // 图片预览\n            imagePreview(url) {\n                let images = document.querySelectorAll(\".lemon-message__content img[src^=http]\");\n                let index = 0;\n                this.images = [];\n                images.forEach((image, i) => {\n                    this.images.push(image.src);\n                    if (image.src === url) {\n                        index = i;\n                    }\n                });\n                this.$viewerApi({\n                    images: this.images,\n                    options: {\n                        toolbar: true,\n                        initialViewIndex: index,\n                    },\n                });\n            },\n\n            // 打开公告\n            openNotice() {\n                return '';\n            },\n\n            // 添加成员\n            openAddGroupUser() {},\n\n            // 更换头像\n            changeAvatar() {\n                this.image_crop.show = true;\n            },\n\n            cropSuccess(imgDataUrl) {\n                fetch(imgDataUrl)\n                    .then(res => res.blob())\n                    .then(blob => {\n                        let hashing = DataHelper.sha256(blob);\n                        this.socket.send(blob); // 上传文件之后，服务器返回path, size, hash\n                        return hashing; // return to next\n                    }).then((hash) => {\n                    // return Promise，在服务器返回数据时调用resolve\n                    return new Promise((resolve) => {\n                        this.upload_next.set(hash, resolve);\n                    });\n                }).then((info) => {\n                    // 数据来自resolve(xxx)\n                    let {path, size, hash} = info;\n                    this.upload_next.delete(hash);\n                    this.sendMessage(Constant.USER_AVATAR_UPLOAD, '0', {path, size});\n                }).catch((e) => {\n                    this.trace(e);\n                });\n            },\n        };\n    }\n}","import IMessage from \"./imessage.js\";\nimport Constant from \"./constant.js\";\nimport IProcessor from \"./iprocessor.js\";\n\nexport class GroupMessage extends IMessage {\n    process(vm, mess) {\n        switch (mess.type) {\n            // 群聊\n            case Constant.GROUP_CREATE:\n            {\n                let group = mess.mess;\n                vm.groups.set(group.id, group);\n                // 更新联系人\n                vm.addGroupContact(group);\n                // 创建群聊通知\n                let admin_id = group.admin_id;\n                // 管理员昵称可能变化，这里查询最新昵称\n                vm.getUserAsync(admin_id, (user) => {\n                    vm.receiveMessage(mess, user);\n                });\n                break;\n            }\n            case Constant.GROUP_QUERY_LIST:\n            {\n                let groups = mess.mess;\n                for (let group_id of Object.keys(groups)) {\n                    let group = groups[group_id];\n                    group.id = group_id;\n                    vm.groups.set(group_id, group);\n                    vm.addGroupContact(group, \" \");\n                }\n                break;\n            }\n            case Constant.GROUP_QUERY_MEMBER:\n            {\n                let data = mess.mess;\n                let group_id = data.group_id;\n                let members = data.members;\n                let resolve = vm.query_member_next.get(group_id);\n                if (resolve) {\n                    resolve(members);\n                }\n                break;\n            }\n            case Constant.GROUP_QUERY_INFO:\n            {\n                let data = mess.mess;\n                let group_id = data.id;\n                let resolve = vm.query_group_next.get(group_id);\n                if (resolve) {\n                    resolve(data);\n                }\n                break;\n            }\n            default:\n            {\n                this.next.process(vm, mess);\n                break;\n            }\n        }\n    }\n}\n\nexport class GroupProcessor extends IProcessor {\n    getData() {\n        return {\n            group_name: \"\",\n            group_available_users: new Map(),\n            group_chosen_users: new Map(),\n            left_options: [],\n            right_options: [],\n            groups: new Map(),\n            // 成员菜单\n            group_menu: [\n                {\n                    text: \"发消息\",\n                    visible: instance => {\n                        return instance.contact.user_id !== this.user.id;\n                    },\n                    click: (e, instance, hide) => {\n                        const { IMUI, contact } = instance;\n                        IMUI.$parent.addPersonalContact(contact, \"临时会话\");\n                        IMUI.changeContact(contact.user_id);\n                        hide();\n                        IMUI.closeDrawer();\n                    },\n                },\n                {\n                    text: \"移除大厅\",\n                    visible: instance => {\n                        const { IMUI, contact } = instance;\n                        return (contact.user_id !== this.user.id)\n                            && (this.user.is_super_admin)\n                            && (IMUI.getCurrentContact().id === \"0\");\n                    },\n                    click: (e, instance, hide) => {\n                        const { contact } = instance;\n                        this.sendMessage(Constant.USER_REMOVE, contact.user_id);\n                        hide();\n                    },\n                },\n            ],\n        };\n    }\n\n    getMethods() {\n        return {\n            // 创建群聊\n            addGroup() {\n                this.group_name = \"\";\n                this.group_available_users = new Map(this.online_users);\n                this.group_available_users.delete(this.user.id);\n                this.group_chosen_users.clear();\n                this.$modal.show('group-modal');\n            },\n            moveToLeft() {\n                this.right_options.forEach((user_id) => {\n                    let user = this.group_chosen_users.get(user_id);\n                    this.group_available_users.set(user_id, user);\n                    this.group_chosen_users.delete(user_id);\n                });\n                this.$forceUpdate();\n            },\n            moveToRight() {\n                this.left_options.forEach((user_id) => {\n                    let user = this.group_available_users.get(user_id);\n                    this.group_chosen_users.set(user_id, user);\n                    this.group_available_users.delete(user_id);\n                });\n                this.$forceUpdate();\n            },\n            groupCancel() {\n                this.$modal.hide('group-modal');\n            },\n            groupSubmit() {\n                if (this.group_name === \"\") {\n                    return this.$notify({\n                        group: 'tip',\n                        text: '请输入群聊名称',\n                        type: 'error',\n                    });\n                }\n                let chosen_num = this.group_chosen_users.size;\n                if (chosen_num < 2) {\n                    return this.$notify({\n                        group: 'tip',\n                        text: '群聊人数不能少于2人',\n                        type: 'error',\n                    });\n                }\n\n                // 请求\n                let mess = {\n                    name: this.group_name,\n                    members: [...this.group_chosen_users.keys()],\n                };\n                this.sendMessage(Constant.GROUP_CREATE, 0, mess);\n                this.$modal.hide('group-modal');\n            },\n        };\n    }\n}","// see https://developer.mozilla.org/en-US/docs/Web/API/AnalyserNode\n// see https://github.com/mdn/webaudio-examples/blob/main/voice-change-o-matic/scripts/app.js\n// see https://mdn.github.io/webaudio-examples/voice-change-o-matic/\nexport default class VoiceVisualize {\n    constructor(stream) {\n        const audioCtx = new AudioContext();\n        this.analyser = audioCtx.createAnalyser();\n        // this.analyser.minDecibels = -90;\n        // this.analyser.maxDecibels = -10;\n        // this.analyser.smoothingTimeConstant = 0.85;\n        this.source = audioCtx.createMediaStreamSource(stream);\n        this.source.connect(this.analyser);\n        this.drawVisual = null;\n    }\n\n    visualize(canvas, visualSetting = \"sine-wave\") {\n        const canvasCtx = canvas.getContext(\"2d\");\n\n        const WIDTH = canvas.width;\n        const HEIGHT = canvas.height;\n        switch (visualSetting) {\n            case \"sine-wave\":\n            {\n                this.analyser.fftSize = 512;\n                const bufferLength = this.analyser.fftSize;\n                console.log(bufferLength);\n\n                // We can use Float32Array instead of Uint8Array if we want higher precision\n                // const dataArray = new Float32Array(bufferLength);\n                const dataArray = new Uint8Array(bufferLength);\n\n                canvasCtx.clearRect(0, 0, WIDTH, HEIGHT);\n\n                const draw = () => {\n                    this.drawVisual = requestAnimationFrame(draw);\n\n                    this.analyser.getByteTimeDomainData(dataArray);\n\n                    canvasCtx.fillStyle = \"rgb(200, 200, 200)\";\n                    canvasCtx.fillRect(0, 0, WIDTH, HEIGHT);\n\n                    canvasCtx.lineWidth = 1;\n                    canvasCtx.strokeStyle = \"rgb(0, 0, 0)\";\n\n                    canvasCtx.beginPath();\n\n                    const sliceWidth = (WIDTH * 1.0) / bufferLength;\n                    let x = 0;\n\n                    for (let i = 0; i < bufferLength; i++) {\n                        const v = dataArray[i] / 128.0;\n                        const y = (v * HEIGHT) / 2;\n\n                        if (i === 0) {\n                            canvasCtx.moveTo(x, y);\n                        } else {\n                            canvasCtx.lineTo(x, y);\n                        }\n\n                        x += sliceWidth;\n                    }\n\n                    canvasCtx.lineTo(WIDTH, HEIGHT / 2);\n                    canvasCtx.stroke();\n                };\n\n                draw();\n                break;\n            }\n            case \"frequency-bars\":\n            {\n                this.analyser.fftSize = 256;\n                const bufferLengthAlt = this.analyser.frequencyBinCount;\n                console.log(bufferLengthAlt);\n\n                // See comment above for Float32Array()\n                const dataArrayAlt = new Uint8Array(bufferLengthAlt);\n\n                canvasCtx.clearRect(0, 0, WIDTH, HEIGHT);\n\n                const drawAlt = () => {\n                    this.drawVisual = requestAnimationFrame(drawAlt);\n\n                    this.analyser.getByteFrequencyData(dataArrayAlt);\n\n                    canvasCtx.fillStyle = \"rgb(0, 0, 0)\";\n                    canvasCtx.fillRect(0, 0, WIDTH, HEIGHT);\n\n                    const barWidth = (WIDTH / bufferLengthAlt) * 2.5;\n                    let x = 0;\n\n                    for (let i = 0; i < bufferLengthAlt; i++) {\n                        const barHeight = dataArrayAlt[i];\n\n                        canvasCtx.fillStyle = \"rgb(\" + (barHeight + 100) + \",50,50)\";\n                        canvasCtx.fillRect(\n                            x,\n                            HEIGHT - barHeight / 2,\n                            barWidth,\n                            barHeight / 2\n                        );\n\n                        x += barWidth + 1;\n                    }\n                };\n\n                drawAlt();\n                break;\n            }\n        }\n    }\n\n    close() {\n        cancelAnimationFrame(this.drawVisual);\n        this.source.disconnect();\n        this.source = null;\n        this.analyser = null;\n    }\n}","import IMessage from \"./imessage.js\";\nimport Constant from \"./constant.js\";\nimport IProcessor from \"./iprocessor.js\";\nimport VoiceVisualize from \"./voice_visualize.js\";\n\nexport class RTCMessage extends IMessage {\n    process(vm, mess) {\n        switch (mess.type) {\n            // RTC\n            case Constant.RTC_CREATE:\n            {\n                let data = mess.mess;\n                let sender_id = mess.sender_id;\n                let receiver_id = mess.receiver_id;\n                if (sender_id === vm.user.id) {\n                    // 本人创建，仅更新room_id\n                    vm.rtc_room_id = data.room_id;\n                    vm.rtc_receiver_id = receiver_id;\n                    return;\n                } else if (vm.rtc_running) {\n                    // 已经在聊天，忽略\n                    let message = vm.user.displayName + \" 正在聊天中\";\n                    vm.sendMessage(Constant.RTC_MESSAGE, sender_id, {\n                        type: \"deny\",\n                        message,\n                    });\n                    return;\n                }\n\n                // 弹窗提示\n                let video = data.video;\n                let is_group = data.is_group;\n                let title = '<div class=\"flex vertical-center\">';\n                title += '<span class=\"call-button\"></span>';\n                title += '<span>';\n                title += is_group ? '多人聊天' : '单人聊天';\n                title += '</span>';\n                title += '</div>';\n                let tag = video ? '视频': '语音';\n                vm.getUserAsync(sender_id, (user) => {\n                    vm.$modal.show('dialog', {\n                        title: title,\n                        text: `<b>${user.username}</b> 邀请您${tag}通话，是否接听？`,\n                        buttons: [\n                            {\n                                title: '拒绝',\n                                handler: () => {\n                                    vm.$modal.hide('dialog');\n                                    vm.sendMessage(Constant.RTC_MESSAGE, sender_id, {\n                                        type: \"deny\",\n                                        message: vm.user.displayName + \" 拒绝了您的通话请求\",\n                                    });\n                                }\n                            },\n                            {\n                                title: '接听',\n                                handler: () => {\n                                    vm.$modal.hide('dialog');\n                                    // 接受，显示弹窗\n                                    vm.$modal.show('rtc-modal');\n                                    vm.rtc_room_id = data.room_id; // 更新room_id\n                                    vm.rtc_receiver_id = receiver_id;\n                                    vm.video_flag = video;\n                                    vm.rtc.setConstraints({ audio: true, video });\n                                    // 打开摄像头，创建连接，添加轨道，设置local，稍后(onNegotiateReady)发送offer\n                                    vm.rtc.open().then((stream) => {\n                                        vm.setLocalStream(stream);\n                                        vm.rtc_running = true;\n                                        let key = vm.rtc.create();\n                                        vm.remote_medias.set(key, null);\n                                        vm.rtc.addTrack(key);\n                                        // 创建key<=>sender关联，后面要用\n                                        vm.associateKeyWithSender(key, sender_id);\n\n                                        // 请求加入房间\n                                        vm.sendMessage(Constant.RTC_JOIN, '0', data);\n                                    }).catch((e) => {\n                                        vm.trace(e);\n                                        vm.rtc_running = true;\n                                    });\n                                }\n                            },\n                        ]\n                    });\n                });\n                break;\n            }\n            case Constant.RTC_JOIN:\n            {\n                let data = mess.mess;\n                let sender_id = mess.sender_id;\n                vm.rtc_room_id = data.room_id;\n                if (sender_id === vm.user.id) return;\n                // 创建连接，添加轨道，设置local，稍后(onNegotiateReady)发送offer\n                let key = vm.rtc.create();\n                vm.remote_medias.set(key, null);\n                vm.rtc.addTrack(key);\n                // 创建key<=>sender关联，后面要用\n                vm.associateKeyWithSender(key, sender_id);\n                break;\n            }\n            case Constant.RTC_MESSAGE:\n            {\n                let sender_id = mess.sender_id;\n                let data = mess.mess;\n                let type = data.type;\n                switch (type) {\n                    case \"offer\": // role: callee\n                    {\n                        // 创建key<=>sender关联，后面要用\n                        let reuse_key = -1;\n                        if (vm.rtc_sender_key.has((sender_id))) {\n                            // when restartIce\n                            reuse_key = vm.rtc_sender_key.get(sender_id);\n                            vm.trace('reuse connection', sender_id, reuse_key);\n                        } else {\n                            let key = vm.rtc.getPeerConnectionLastId();\n                            vm.associateKeyWithSender(key, sender_id);\n                        }\n                        // 创建连接，设置remote，打开摄像头，添加轨道，发送answer\n                        let description = data.description;\n                        vm.rtc.handleVideoOfferMsg(description, reuse_key).then(({description}) => {\n                            vm.sendAnswer(sender_id, description);\n                        });\n                        break;\n                    }\n                    case \"answer\": // role: caller\n                    {\n                        // 设置remote\n                        let key = vm.rtc_sender_key.get(sender_id);\n                        vm.rtc.handleVideoAnswerMsg(key, data.description);\n                        break;\n                    }\n                    case \"new-ice-candidate\": // role: caller or callee\n                    {\n                        let candidate = data.candidate;\n                        if (vm.rtc_sender_key.has(sender_id)) {\n                            let key = vm.rtc_sender_key.get(sender_id);\n                            vm.rtc.handleNewICECandidateMsg(key, candidate);\n                        } else {\n                            // 还未建立连接（作为callee时出现），先保存起来，一会再处理\n                            vm.trace('record candidate', sender_id, candidate);\n                            let candidates;\n                            if (vm.candidates.has(sender_id)) {\n                                candidates = vm.candidates.get(sender_id);\n                                candidates.push(candidate);\n                            } else {\n                                candidates = [candidate];\n                            }\n                            vm.candidates.set(sender_id, candidates);\n                        }\n                        break;\n                    }\n                    case \"deny\":\n                    {\n                        let message = data.message;\n                        vm.$notify({\n                            group: 'tip',\n                            text: message,\n                            type: 'error',\n                        });\n                        break;\n                    }\n                }\n                break;\n            }\n            case Constant.RTC_CLOSE:\n            case Constant.RTC_OFFLINE:\n            {\n                // 关闭远端video\n                let sender_id = mess.sender_id;\n                if (vm.rtc_sender_key.has(sender_id)) {\n                    let key = vm.rtc_sender_key.get(sender_id);\n                    vm.rtc.close(key);\n                }\n                break;\n            }\n            case Constant.RTC_EXIT:\n            {\n                let sender_id = mess.sender_id;\n                if (sender_id === vm.user.id) return;\n                let data = mess.mess;\n                if (vm.rtc_running && (data.room_id === vm.rtc_room_id)) {\n                    // 已接听，关闭聊天窗口\n                    vm.$notify({\n                        group: 'tip',\n                        text: '聊天已经结束',\n                        type: 'warn',\n                    });\n                    vm.hangUp(false);\n                } else {\n                    // 未接听，关闭弹窗提示\n                    vm.$modal.hide('dialog');\n                }\n                break;\n            }\n            default:\n            {\n                this.next.process(vm, mess);\n                break;\n            }\n        }\n    }\n}\n\nexport class RTCProcessor extends IProcessor {\n    getData() {\n        return {\n            rtc: null,\n            video_flag: true,\n            local_media: null,\n            remote_medias: new Map(),\n            remote_users: new Map(),\n            voice_visualizes: new Map(),\n            clock_text: \"\",\n            clock_timer: 0,\n            candidates: new Map(),\n            rtc_key_sender: new Map(),\n            rtc_sender_key: new Map(),\n            rtc_room_id: \"\",\n            rtc_receiver_id: \"\",\n            rtc_running: false,\n            rtc_minimize: false,\n        };\n    }\n\n    getMethods() {\n        return {\n            // WebRTC\n            hangUp(notify = true) {\n                this.$modal.hide('rtc-modal');\n                this.rtc_running = false;\n                this.rtc_key_sender.clear();\n                this.rtc_sender_key.clear();\n                this.remote_users.clear();\n                this.rtc.closeAll();\n                this.closeLocalStream();\n                this.clockStop();\n                this.closeVisualize();\n\n                // 通知其他人\n                if (notify) {\n                    let contact = this.im.findContact(this.rtc_receiver_id);\n                    this.sendMessage(Constant.RTC_CLOSE, this.rtc_receiver_id, {\n                        is_group: contact.is_group,\n                        room_id: this.rtc_room_id,\n                    });\n                }\n\n                this.rtc_room_id = \"\";\n                this.rtc_receiver_id = \"\";\n            },\n            minimize() {\n                this.rtc_minimize = true;\n            },\n            maximize() {\n                this.rtc_minimize = false;\n            },\n            setMute(e) {\n                // muted prop not working, used js\n                e.target.muted = true;\n            },\n            clockStart() {\n                if (this.clock_timer) return;\n                let begin = Date.now();\n                this.clock_timer = setInterval(() => {\n                    let diff = Date.now() - begin;\n                    let date = new Date(diff);\n                    this.clock_text = date.formatUTC('H:i:s');\n                }, 1000);\n            },\n            clockStop() {\n                clearInterval(this.clock_timer);\n                this.clock_timer = 0;\n                this.clock_text = \"\";\n            },\n            closeVisualize() {\n                for (let visualize of this.voice_visualizes.values()) {\n                    visualize.close();\n                }\n                this.voice_visualizes.clear();\n            },\n            associateKeyWithSender(key, sender_id) {\n                this.rtc_key_sender.set(key, sender_id);\n                this.rtc_sender_key.set(sender_id, key);\n                this.getUserAsync(sender_id, (user) => {\n                    this.remote_users.set(key, user);\n                });\n            },\n            setLocalStream(stream) {\n                this.trace('set local stream', ...arguments);\n                this.local_media = stream;\n                let canvas = document.querySelector(\"#local-canvas\");\n                let visualize = new VoiceVisualize(stream);\n                visualize.visualize(canvas);\n                this.voice_visualizes.set('local', visualize);\n            },\n            closeLocalStream() {\n                this.trace('close local stream');\n                if (this.local_media) {\n                    this.local_media.getTracks().forEach((track) => track.stop());\n                    this.local_media = null;\n                    this.candidates.clear();\n                }\n            },\n            sendAnswer(sender_id, description) {\n                this.trace('send answer', ...arguments);\n                // 发送answer到远端\n                this.sendMessage(Constant.RTC_MESSAGE, sender_id, {\n                    type: \"answer\",\n                    description,\n                });\n            },\n            onNegotiateReady(key, description) {\n                // role caller\n                this.trace('negotiate ready', ...arguments);\n                // 发送offer到远端\n                let sender_id = this.rtc_key_sender.get(key);\n                this.sendMessage(Constant.RTC_MESSAGE, sender_id, {\n                    type: \"offer\",\n                    description,\n                });\n            },\n            onIceCandidate(key, candidate) {\n                this.trace('candidate', ...arguments);\n                if (candidate === null) return;\n                let sender_id = this.rtc_key_sender.get(key);\n                this.trace('ice', sender_id);\n                this.sendMessage(Constant.RTC_MESSAGE, sender_id, {\n                    type: \"new-ice-candidate\",\n                    candidate,\n                });\n                // 若有Interactive Connectivity Establishment candidates，则处理\n                if (this.candidates.has(sender_id)) {\n                    let candidates = this.candidates.get(sender_id);\n                    this.trace('handle candidates', candidates);\n                    for (let candidate of candidates) {\n                        this.rtc.handleNewICECandidateMsg(key, candidate);\n                    }\n                    this.candidates.set(sender_id, []);\n                }\n            },\n            onTrack(key, streams) {\n                this.trace('track', ...arguments);\n                let stream = streams[0];\n                let is_same = (this.remote_medias.get(key) === stream);\n                if (!is_same) {\n                    this.remote_medias.set(key, stream);\n                    this.$forceUpdate();\n                    this.$nextTick(() => {\n                        let canvas = document.querySelector(\"#remote-canvas-\" + key);\n                        // 销毁前一个动画\n                        if (this.voice_visualizes.has(key)) {\n                            this.voice_visualizes.get(key).close();\n                            this.voice_visualizes.delete(key);\n                        }\n                        // 初始化动画\n                        let visualize = new VoiceVisualize(stream);\n                        visualize.visualize(canvas);\n                        this.voice_visualizes.set(key, visualize);\n                    });\n                    this.clockStart();\n                }\n            },\n            onRemoteSteamClose(key) {\n                this.trace('remote stream close', ...arguments);\n                if (this.remote_medias.has(key)) {\n                    this.remote_medias.get(key) && this.remote_medias.get(key).getTracks().forEach((track) => track.stop());\n                    this.remote_medias.delete(key);\n                    this.$forceUpdate();\n                }\n            },\n        };\n    }\n}","import IMessage from \"./imessage.js\";\n\nexport class UnknownMessage extends IMessage {\n    process(vm, mess) {\n        vm.$notify({\n            group: 'tip',\n            text: '未知的消息类型：' + mess.type,\n            type: 'warn',\n        });\n    }\n}","<template>\n    <main>\n        <lemon-imui :user=\"user\" ref=\"im\"\n                    :hide-message-name=\"false\"\n                    :avatarCricle=\"true\"\n                    :width=\"width\"\n                    :height=\"height\"\n                    @pull-messages=\"getHistory\"\n                    @message-click=\"messageClick\"\n                    @change-contact=\"changeContact\"\n                    @menu-avatar-click=\"changeAvatar\"\n                    @send=\"send\">\n\n            <!--搜索、创建群聊-->\n            <template #sidebar-message-fixedtop=\"\">\n                <div class=\"flex space-between search-bar\">\n                    <input type=\"text\" class=\"input-medium\" placeholder=\"搜索\" />\n                    <button @click=\"addGroup\">➕</button>\n                </div>\n            </template>\n\n            <!--最近消息（可删除，默认无状态显示）-->\n            <template #sidebar-message=\"contact\">\n                <lemon-badge\n                    :count=\"contact.unread\"\n                    class=\"lemon-contact__avatar\">\n                    <lemon-avatar :size=\"40\" :src=\"contact.avatar\" />\n                </lemon-badge>\n                <div class=\"lemon-contact__inner\">\n                    <p class=\"lemon-contact__label\">\n                        <span class=\"online-status\" v-if=\"contact.is_online\"></span>\n                        <span class=\"lemon-contact__name\">{{contact.displayName}}</span>\n                        <span class=\"lemon-contact__time\">{{contact.lastSendTime ? timeFormat(contact.lastSendTime) : \"\"}} </span>\n                    </p>\n                    <p class=\"lemon-contact__content\">\n                        <span v-html=\"contact.lastContent\"></span>\n                    </p>\n                </div>\n            </template>\n\n            <!--聊天窗口标题（可删除，默认无人数显示）-->\n            <template #message-title=\"contact\">\n                <div class=\"flex space-between\">\n                    <span>{{contact.displayName}}<span v-if=\"contact.is_group\"> ({{contact.id ? contact.members.size : contact.online_total}})</span></span>\n                    <b @click=\"toggleDrawer(contact)\" class=\"pointer user-select-none\">···</b>\n                </div>\n            </template>\n\n            <!--聊天窗口右侧栏（可删除，默认群成员显示）-->\n            <template #drawer=\"contact\">\n                <div class=\"slot-group\" v-if=\"contact.is_group\">\n                    <div class=\"slot-group-title\">群通知</div>\n                    <hr/>\n                    <div class=\"slot-group-notice\">公告内容</div>\n                    <hr/>\n                    <div class=\"slot-group-title\">群成员</div>\n                    <input class=\"slot-search\" placeholder=\"搜索群成员\"/>\n                    <div class=\"slot-group-panel flex flex-top\">\n                        <lemon-contact\n                            v-for=\"item of contact.members.values()\"\n                            :key=\"item.user_id\"\n                            :contact=\"item\"\n                            v-lemon-contextmenu.contact=\"group_menu\">\n                            <div class=\"slot-group-member\">\n                                <div class=\"slot-group-avatar\">\n                                    <img :src=\"item.avatar ? upload_url + item.avatar : default_avatar_url\" alt=\"avatar\" />\n                                </div>\n                                <div class=\"slot-group-name text-ellipsis\">{{item.username}}</div>\n                            </div>\n                        </lemon-contact>\n                    </div>\n                </div>\n            </template>\n        </lemon-imui>\n\n        <!--注册/登录弹框-->\n        <modal name=\"login-modal\" :clickToClose=\"false\" :height=\"250\" :width=\"250\" :adaptive=\"true\">\n            <dialog class=\"box\" open>\n                <div class=\"partition-title\">请登录/注册</div>\n                <div class=\"partition-form\">\n                    <form autocomplete=\"off\">\n                        <input type=\"text\" id=\"username\" v-model=\"username\" placeholder=\"起个名吧，亲:)\"\n                               maxlength=\"30\" autocomplete/>\n                        <input type=\"password\" id=\"password\" v-model=\"password\" placeholder=\"密码：默认123456\"\n                               maxlength=\"16\"/>\n                        <button type=\"submit\" class=\"large-btn gold-btn\" v-on:click=\"login\">\n                            登录/注册\n                        </button>\n                    </form>\n                </div>\n            </dialog>\n        </modal>\n\n        <!--掉线提示-->\n        <modal name=\"disconnect-modal\" :clickToClose=\"false\" :height=\"25\" :width=\"300\">{{disconnect_mess}}</modal>\n\n        <!--提示框-->\n        <notifications group=\"tip\" position=\"top center\" />\n\n        <!--图片预览-->\n        <viewer :images=\"images\"></viewer>\n\n        <!--头像裁剪-->\n        <template>\n            <image-crop\n                field=\"img\"\n                @crop-success=\"cropSuccess\"\n                v-model=\"image_crop.show\"\n                :width=\"300\"\n                :height=\"300\"\n                img-format=\"png\"></image-crop>\n        </template>\n\n        <!--创建群聊-->\n        <modal name=\"group-modal\" :clickToClose=\"true\" :height=\"500\" :width=\"666\" :adaptive=\"true\">\n            <div class=\"modal-content\">\n                <div class=\"modal-header\">\n                    <h3 class=\"modal-title\">创建群聊</h3>\n                    <span>群聊名称：</span>\n                    <input v-model=\"group_name\" class=\"input-medium group-name\" placeholder=\"请输入群聊名称\" />\n                </div>\n                <div class=\"flex space-between vertical-center modal-body\">\n                    <div class=\"group-select\">\n                        <div>联系人</div>\n                        <select multiple v-model=\"left_options\" size=\"10\">\n                            <option v-for=\"item of group_available_users.values()\" :key=\"item.user_id\" :value=\"item.user_id\">{{item.username}}</option>\n                        </select>\n                    </div>\n                    <div class=\"group-select-middle\">\n                        <button @click=\"moveToLeft\">⬅️</button>\n                        <button @click=\"moveToRight\">➡️</button>\n                    </div>\n                    <div class=\"group-select\">\n                        <div>已选</div>\n                        <select multiple v-model=\"right_options\" size=\"10\">\n                            <option v-for=\"item of group_chosen_users.values()\" :key=\"item.user_id\" :value=\"item.user_id\">{{item.username}}</option>\n                        </select>\n                    </div>\n                </div>\n                <div class=\"flex horizontal-right modal-footer\">\n                    <button @click=\"groupCancel\">取消</button>\n                    <button @click=\"groupSubmit\">确定</button>\n                </div>\n            </div>\n        </modal>\n\n        <!--WebRTC-->\n        <modal name=\"rtc-modal\" :clickToClose=\"false\" :height=\"'auto'\" :width=\"960\" :scrollable=\"true\" draggable=\"true\" v-show=\"!rtc_minimize\">\n            <div class=\"flex flex-wrap horizontal-center vertical-center\">\n                <template v-if=\"video_flag\">\n                    <div class=\"local-video\">\n                        <video autoplay muted :srcObject.prop=\"local_media\"></video>\n                        <div class=\"flex video-bar\">\n                            <div class=\"video-tag text-ellipsis\">{{user.displayName}}</div>\n                            <canvas class=\"voice-visualize-canvas\" id=\"local-canvas\" width=\"420\" height=\"30\" />\n                        </div>\n                    </div>\n                    <div class=\"remote-video\"\n                         v-for=\"[index, remote_video] of remote_medias\" :key=\"index\">\n                        <video autoplay :srcObject.prop=\"remote_video\"></video>\n                        <div class=\"flex video-bar\">\n                            <div class=\"video-tag text-ellipsis\">{{remote_users.get(index).username}}</div>\n                            <canvas class=\"voice-visualize-canvas\" :id=\"'remote-canvas-' + index\" width=\"420\" height=\"30\" />\n                        </div>\n                    </div>\n                </template>\n                <template v-else>\n                    <div class=\"local-audio\">\n                        <audio autoplay muted :srcObject.prop=\"local_media\" @canplay=\"setMute\"></audio>\n                        <div class=\"flex audio-bar\">\n                            <div>\n                                <img :src=\"user.avatar\" />\n                                <div class=\"text-ellipsis text-center username\">{{user.displayName}}</div>\n                            </div>\n                            <canvas class=\"voice-visualize-canvas\" id=\"local-canvas\" width=\"380\" height=\"120\" />\n                        </div>\n                    </div>\n                    <div class=\"remote-audio\"\n                         v-for=\"[index, remote_audio] of remote_medias\" :key=\"index\">\n                        <audio autoplay :srcObject.prop=\"remote_audio\"></audio>\n                        <div class=\"flex audio-bar\">\n                            <div>\n                                <img :src=\"remote_users.get(index).avatar ? upload_url + remote_users.get(index).avatar : default_avatar_url\" />\n                                <div class=\"text-ellipsis text-center username\">{{remote_users.get(index).username}}</div>\n                            </div>\n                            <canvas class=\"voice-visualize-canvas\" :id=\"'remote-canvas-' + index\" width=\"380\" height=\"120\" />\n                        </div>\n                    </div>\n                </template>\n            </div>\n            <div class=\"flex space-between vertical-center\">\n                <div>\n                    <button @click=\"minimize\" class=\"minimize-button\">➖最小化</button>\n                </div>\n                <div class=\"flex vertical-center\">\n                    <span>{{clock_text}}</span>\n                    <button @click=\"hangUp\" class=\"flex vertical-center\">\n                        <span class=\"hang-up-button\"></span>\n                        <span>结束通话</span>\n                    </button>\n                </div>\n            </div>\n        </modal>\n\n        <!--对话框-->\n        <v-dialog />\n\n        <div class=\"minimize-call flex flex-wrap horizontal-center\" v-show=\"rtc_minimize\">\n            <button @click=\"maximize\" class=\"call-button\"></button>\n            <div>{{clock_text}}</div>\n        </div>\n    </main>\n</template>\n\n<script>\nimport './css/login.css';\nimport './css/main.css';\nimport 'weui-icon';\n\nimport emoji from './js/emoji.js';\nimport WebRTC from \"./js/webrtc.js\";\nimport Constant from \"./js/constant.js\";\nimport {GeneralMessage, GeneralProcessor} from \"./js/general.js\";\nimport {GroupMessage, GroupProcessor} from \"./js/group.js\";\nimport {RTCMessage, RTCProcessor} from \"./js/rtc.js\";\nimport {UnknownMessage} from \"./js/unknown.js\";\n\nexport default {\n    name: 'App',\n    // data和methods在Processor中\n    mixins: [\n        new GeneralProcessor(),\n        new GroupProcessor(),\n        new RTCProcessor(),\n    ],\n    mounted() {\n        const {im} = this.$refs;\n        this.im = im;\n\n        // 连接服务器，监听事件\n        this.socket = new WebSocket(this.server_url);\n        // this.socket.binaryType = 'arraybuffer'; //设为二进制的原始缓冲区\n\n        this.socket.addEventListener('open', this.onOpen);\n        this.socket.addEventListener('message', this.onMessage);\n        this.socket.addEventListener('close', this.onClose);\n        this.socket.addEventListener('error', this.onError);\n\n        // 菜单\n        this.im.initMenus([{name: \"messages\"}, {name: \"contacts\"}]);\n\n        // 初始化表情包\n        this.im.initEmoji(emoji);\n\n        // 初始化消息处理\n        let general = new GeneralMessage();\n        let group = new GroupMessage();\n        let rtc = new RTCMessage();\n        let unknown = new UnknownMessage();\n        general.setNext(group);\n        group.setNext(rtc);\n        rtc.setNext(unknown);\n        this.message_handler = general;\n\n        // 初始化RTC\n        this.rtc = new WebRTC();\n        this.rtc.setCallbacks({\n            onTrack: this.onTrack,\n            onNegotiateReady: this.onNegotiateReady,\n            onIceCandidate: this.onIceCandidate,\n            onRemoteSteamClose: this.onRemoteSteamClose,\n        });\n\n        // 初始化工具栏\n        this.im.initEditorTools([\n            {\n                name: 'emoji'\n            },\n            {\n                name: 'uploadImage'\n            },\n            {\n                name: 'uploadDoc',\n                title: \"上传文档\",\n                click: () => {\n                    this.im.$refs.editor.selectFile(\".doc,.docx,.xls,.xlsx\");\n                },\n                render: () => {\n                    return <i class=\"weui-icon-outlined-note\"></i>;\n                },\n            },\n            {\n                name: \"uploadMusic\",\n                title: \"上传音乐\",\n                click: () => {\n                    this.im.$refs.editor.selectFile(\".mp3\");\n                },\n                render: () => {\n                    return <i class=\"weui-icon-outlined-music\"></i>;\n                },\n            },\n            {\n                name: \"videoChat\",\n                title: \"视频聊天\",\n                click: () => {\n                    if (this.rtc_minimize) {\n                        return this.$notify({\n                            group: 'tip',\n                            text: '已在通话中',\n                            type: 'warn',\n                        });\n                    }\n\n                    this.$modal.show('rtc-modal');\n\n                    this.rtc_room_id = \"\";\n                    let contact = this.im.getCurrentContact();\n                    let video = true;\n                    this.video_flag = video;\n                    this.rtc.setConstraints({ audio: true, video });\n                    this.rtc.open().then((stream) => {\n                        this.setLocalStream(stream);\n                        this.rtc_running = true;\n                        // 请求CREATE ROOM\n                        let is_group = contact.is_group;\n                        this.sendMessage(Constant.RTC_CREATE, contact.id, {\n                            is_group,\n                            video,\n                        });\n                    }).catch((e) => {\n                        this.trace(e);\n                        this.rtc_running = true;\n                    });\n                },\n                render: () => {\n                    return <i class=\"weui-icon-outlined-video-call\"></i>;\n                },\n            },\n            {\n                name: \"VoiceChat\",\n                title: \"语音聊天\",\n                click: () => {\n                    if (this.rtc_minimize) {\n                        return this.$notify({\n                            group: 'tip',\n                            text: '已在通话中',\n                            type: 'warn',\n                        });\n                    }\n\n                    this.$modal.show('rtc-modal');\n\n                    this.rtc_room_id = \"\";\n                    let contact = this.im.getCurrentContact();\n                    let video = false;\n                    this.video_flag = video;\n                    this.rtc.setConstraints({ audio: true, video });\n                    this.rtc.open().then((stream) => {\n                        this.setLocalStream(stream);\n                        this.rtc_running = true;\n                        // 请求CREATE ROOM\n                        let is_group = contact.is_group;\n                        this.sendMessage(Constant.RTC_CREATE, contact.id, {\n                            is_group,\n                            video,\n                        });\n                    }).catch((e) => {\n                        this.trace(e);\n                        this.rtc_running = true;\n                    });\n                },\n                render: () => {\n                    return <i class=\"weui-icon-outlined-mike\"></i>;\n                },\n            },\n        ]);\n\n        // 自定义消息-音乐\n        this.im.setLastContentRender('music', (message) => {\n            return <span>[音乐]{message.fileName}</span>;\n        });\n\n        // 大厅\n        this.addGroupContact({\n            id: '0',\n            name: '大厅',\n            avatar: '',\n        }, \"\", this.online_users);\n    },\n}\n</script>","var render, staticRenderFns\nimport script from \"./lemon-message-music.vue?vue&type=script&lang=js\"\nexport * from \"./lemon-message-music.vue?vue&type=script&lang=js\"\nimport style0 from \"./lemon-message-music.vue?vue&type=style&index=0&id=feb7b23c&prod&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=23da8a62\"\nimport script from \"./App.vue?vue&type=script&lang=js\"\nexport * from \"./App.vue?vue&type=script&lang=js\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<style>\n.lemon-message .lemon-message__audio_name {\n    padding: 0 0 8px 0;\n    text-align: center;\n    color: #5C3BB5;\n}\n\n.lemon-message::before {\n    display: none;\n}\n</style>\n<script>\nexport default {\n    name: \"lemonMessageMusic\",\n    inheritAttrs: false,\n    inject: [\"IMUI\"],\n    render() {\n        return (\n            <lemon-message-basic\n                class=\"lemon-message-audio\"\n                props={{...this.$attrs}}\n                scopedSlots={{\n                    content: props => {\n                        return (\n                            <div>\n                                <div class=\"lemon-message__audio_name\">\n                                    <i>🎵</i>\n                                    <span>{props.fileName}</span>\n                                </div>\n                                <audio controls src={props.content} title={props.fileName}></audio>\n                            </div>\n                        );\n                    }\n                }}\n            />\n        );\n    }\n};\n</script>","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./lemon-message-music.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./lemon-message-music.vue?vue&type=script&lang=js\"","import Vue from 'vue'\nimport App from './App.vue'\nimport LemonIMUI from 'lemon-imui-rx';\nimport 'lemon-imui-rx/dist/index.css';\nimport lemonMessageMusic from './components/lemon-message-music.vue';\nVue.component(lemonMessageMusic.name, lemonMessageMusic);\nimport VModal from 'vue-js-modal';\nimport Notifications from 'vue-notification';\nimport 'viewerjs/dist/viewer.css';\nimport VueViewer from 'v-viewer';\nimport ImageCrop from 'vue-image-crop-upload/upload-2';\n\nVue.config.productionTip = false;\nVue.use(LemonIMUI);\nVue.use(VModal, { dialog: true });\nVue.use(Notifications);\nVue.use(VueViewer);\nVue.component('image-crop', ImageCrop);\n\nnew Vue({\n  render: h => h(App),\n}).$mount('#app')\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.hmd = function(module) {\n\tmodule = Object.create(module);\n\tif (!module.children) module.children = [];\n\tObject.defineProperty(module, 'exports', {\n\t\tenumerable: true,\n\t\tset: function() {\n\t\t\tthrow new Error('ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: ' + module.id);\n\t\t}\n\t});\n\treturn module;\n};","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t524: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkhtml_v2\"] = self[\"webpackChunkhtml_v2\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [504], function() { return __webpack_require__(1643); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["render","_vm","this","_c","_self","ref","attrs","user","width","height","on","getHistory","messageClick","changeContact","changeAvatar","send","scopedSlots","_u","key","fn","staticClass","addGroup","_v","proxy","contact","unread","avatar","is_online","_e","_s","displayName","lastSendTime","timeFormat","domProps","lastContent","is_group","id","members","size","online_total","$event","toggleDrawer","_l","values","item","directives","name","rawName","value","group_menu","expression","modifiers","user_id","upload_url","default_avatar_url","username","target","composing","password","login","disconnect_mess","images","cropSuccess","model","image_crop","show","callback","$$v","$set","group_name","left_options","$$selectedVal","Array","prototype","filter","call","options","o","selected","map","val","_value","multiple","group_available_users","moveToLeft","moveToRight","right_options","group_chosen_users","groupCancel","groupSubmit","rtc_minimize","video_flag","local_media","remote_medias","index","remote_video","remote_users","get","setMute","remote_audio","minimize","clock_text","hangUp","maximize","staticRenderFns","label","children","WebRTC","constructor","config","iceServers","urls","credential","constraints","audio","video","callbacks","pcs","Map","stream","timers","setCallbacks","onTrack","onNegotiateReady","onIceCandidate","onRemoteSteamClose","setConstraints","open","navigator","mediaDevices","getUserMedia","e","console","error","alert","message","Error","create","pc","RTCPeerConnection","getPeerConnectionLastId","set","ontrack","track","streams","onunmute","onnegotiationneeded","async","offer","createOffer","iceRestart","sdp","replaceSDP","setLocalDescription","localDescription","onicecandidate","candidate","oniceconnectionstatechange","log","iceConnectionState","close","restartIce","setTimeout","has","clearTimeout","onicegatheringstatechange","iceGatheringState","onsignalingstatechange","signalingState","addTrack","getTracks","onremovetrack","onremovestream","delete","closeAll","forEach","clear","handleVideoOfferMsg","description","reuse_key","setRemoteDescription","answer","createAnswer","handleVideoAnswerMsg","handleNewICECandidateMsg","addIceCandidate","replace","Constant","_defineProperty","IMessage","setNext","next","getNext","DataHelper","encode","obj","JSON","stringify","decode","str","parse","toObject","buildTraceId","Math","random","toString","substr","sha256","blob","buffer","arrayBuffer","hashBuffer","crypto","subtle","digest","hashArray","from","Uint8Array","b","padStart","join","generateUUID","time","Date","getTime","performance","now","char","rand","floor","String","replaceMulti","search","RegExp","format","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","substring","formatUTC","getUTCFullYear","getUTCMonth","getUTCDate","getUTCHours","getUTCMinutes","getUTCSeconds","IProcessor","methods","getMethods","data","getData","GeneralMessage","process","vm","mess","type","MESSAGE_SELF","IMAGE_SELF","FILE_SELF","MUSIC_SELF","USER_REGISTER","$modal","USER_INCORRECT","$notify","group","text","USER_LOGIN","hide","DEFAULT_AVATAR","is_active","parseInt","is_super_admin","setCookie","online_users","sendMessage","USER_ONLINE_TOTAL","GROUP_QUERY_LIST","USER_LIST","users","USER_ONLINE","im","appendMessage","status","sendTime","timestamp","content","toContactId","updateContact","USER_QUIT","fromUser","max","USER_QUERY","addUser","resolve","query_next","USER_DOWNLINE","USER_REMOVE","USER_DISABLED","USER_AVATAR_SUCCESS","USER_AVATAR_FAIL","MESSAGE_COMMON","MESSAGE_OTHER","IMAGE_COMMON","IMAGE_OTHER","MUSIC_COMMON","MUSIC_OTHER","FILE_COMMON","FILE_OTHER","sender_id","receiver_id","findContact","GROUP_QUERY_INFO","promise","Promise","query_group_next","then","addGroupContact","getUserAsync","addPersonalContact","receiveMessage","HISTORY_MESSAGE_COMMON","HISTORY_MESSAGE_PERSONAL","contact_id","pull_next","FILE_UPLOAD_SUCCESS","upload_next","hash","ERROR","WARNING","SYSTEM","GeneralProcessor","server_url","window","innerWidth","innerHeight","socket","reconnect_times","send_next","query_member_next","onOpen","getCookie","onMessage","trace","message_handler","onClose","readyState","WebSocket","OPEN","timer","handler","MAX_LIMITS","clearInterval","addEventListener","onError","binaryType","setInterval","date","is_today","DEBUG","toFixed","arguments","groupEnd","nameEQ","ca","document","cookie","split","c","charAt","length","indexOf","unescape","exp","setTime","COOKIE_EXPIRE_DAYS","escape","toGMTString","trace_id","defaults","Object","assign","parseMessage","sender","fileSize","fileName","path","GROUP_CREATE","admin_name","parsed","option","lastMessage","query_time","appendContact","getUser","Function","preventDefault","trim","reject","query_id_list","Set","list","one","add","promise_list","promise2","push","all","messages","is_end","file","music_types","includes","limit_size","is_personal","type_map","IMAGE_PERSONAL","FILE_PERSONAL","MESSAGE_PERSONAL","MUSIC_PERSONAL","MAX_IMAGE_SIZE","MAX_MUSIC_SIZE","MAX_FILE_SIZE","message_id","hashing","info","updateMessage","changeDrawer","position","offsetY","$el","clientHeight","imagePreview","group_id","GROUP_QUERY_MEMBER","member","$forceUpdate","url","querySelectorAll","image","i","src","$viewerApi","toolbar","initialViewIndex","openNotice","openAddGroupUser","imgDataUrl","fetch","res","USER_AVATAR_UPLOAD","catch","GroupMessage","groups","admin_id","keys","GroupProcessor","visible","instance","click","IMUI","$parent","closeDrawer","getCurrentContact","chosen_num","VoiceVisualize","audioCtx","AudioContext","analyser","createAnalyser","source","createMediaStreamSource","connect","drawVisual","visualize","canvas","visualSetting","canvasCtx","getContext","WIDTH","HEIGHT","fftSize","bufferLength","dataArray","clearRect","draw","requestAnimationFrame","getByteTimeDomainData","fillStyle","fillRect","lineWidth","strokeStyle","beginPath","sliceWidth","x","v","y","moveTo","lineTo","stroke","bufferLengthAlt","frequencyBinCount","dataArrayAlt","drawAlt","getByteFrequencyData","barWidth","barHeight","cancelAnimationFrame","disconnect","RTCMessage","RTC_CREATE","rtc_room_id","room_id","rtc_receiver_id","rtc_running","RTC_MESSAGE","title","tag","buttons","rtc","setLocalStream","associateKeyWithSender","RTC_JOIN","rtc_sender_key","sendAnswer","candidates","RTC_CLOSE","RTC_OFFLINE","RTC_EXIT","RTCProcessor","voice_visualizes","clock_timer","rtc_key_sender","notify","closeLocalStream","clockStop","closeVisualize","muted","clockStart","begin","diff","querySelector","stop","is_same","$nextTick","UnknownMessage","mixins","mounted","h","$createElement","$refs","initMenus","initEmoji","emoji","general","unknown","initEditorTools","editor","selectFile","setLastContentRender","component","inheritAttrs","inject","_mergeJSXProps","$attrs","props","Vue","lemonMessageMusic","productionTip","use","LemonIMUI","VModal","dialog","Notifications","VueViewer","ImageCrop","App","$mount","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","exports","module","loaded","__webpack_modules__","m","deferred","O","result","chunkIds","priority","notFulfilled","Infinity","fulfilled","j","every","splice","r","n","getter","__esModule","d","a","definition","defineProperty","enumerable","g","globalThis","hmd","prop","hasOwnProperty","Symbol","toStringTag","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","some","chunkLoadingGlobal","self","bind","__webpack_exports__"],"sourceRoot":""}